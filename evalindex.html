<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeoClinic - Sistema Integral de Datos Cl√≠nicos Neonatales</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .slide {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }
        
        .card-elegant {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            border-radius: 20px;
            transition: all 0.3s ease;
        }
        
        .card-elegant:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.15);
        }
        
        .icon-gradient {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .floating {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .fade-in {
            animation: fadeIn 1s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .stagger-item {
            opacity: 0;
            animation: staggerIn 0.8s ease forwards;
        }
        
        .stagger-item:nth-child(1) { animation-delay: 0.2s; }
        .stagger-item:nth-child(2) { animation-delay: 0.4s; }
        .stagger-item:nth-child(3) { animation-delay: 0.6s; }
        .stagger-item:nth-child(4) { animation-delay: 0.8s; }
        .stagger-item:nth-child(5) { animation-delay: 1.0s; }
        .stagger-item:nth-child(6) { animation-delay: 1.2s; }
        
        @keyframes staggerIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .pulse-glow {
            animation: pulseGlow 2s ease-in-out infinite;
        }
        
        @keyframes pulseGlow {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
            }
            50% { 
                box-shadow: 0 0 40px rgba(59, 130, 246, 0.6);
            }
        }
        
        .morphing-bg {
            background: linear-gradient(-45deg, #3b82f6, #8b5cf6, #ec4899, #f97316);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .objective-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(248,250,252,0.9));
            border-left: 4px solid;
            transition: all 0.3s ease;
        }
        
        .objective-card:hover {
            transform: translateX(5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="morphing-bg min-h-full">
    <!-- Slide 1: Portada -->
    <section class="slide">
        <div class="card-elegant p-12 max-w-4xl w-full text-center fade-in">
            <div class="floating mb-8">
                <div class="w-24 h-24 bg-gradient-to-br from-blue-600 via-purple-600 to-pink-500 rounded-3xl flex items-center justify-center mx-auto shadow-2xl pulse-glow">
                    <!-- Logo SVG -->
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M24 8C28 8 31 11 31 15C31 19 28 22 24 22C20 22 17 19 17 15C17 11 20 8 24 8Z" fill="white" opacity="0.9"/>
                        <path d="M8 28L12 28L14 24L17 32L20 18L23 38L26 24L28 28L40 28" stroke="white" stroke-width="3" fill="none" opacity="0.8"/>
                        <rect x="22" y="32" width="4" height="12" rx="2" fill="white" opacity="0.7"/>
                        <rect x="16" y="37" width="16" height="4" rx="2" fill="white" opacity="0.7"/>
                    </svg>
                </div>
            </div>
            
            <h1 class="text-5xl font-bold mb-4">
                <span class="icon-gradient">NeoClinic</span>
            </h1>
            <h2 class="text-2xl text-gray-700 mb-6">Sistema Integral de Datos Cl√≠nicos Neonatales</h2>
            
            <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 mb-8">
                <p class="text-lg text-gray-700 leading-relaxed">
                    Sistema integral para optimizar el cuidado de enfermer√≠a
                </p>
            </div>
            
            <div class="grid grid-cols-3 gap-6 text-center">
                <div class="stagger-item">
                    <div class="text-3xl mb-2">üë∂</div>
                    <div class="text-sm font-medium text-gray-600">Cuidado Neonatal</div>
                </div>
                <div class="stagger-item">
                    <div class="text-3xl mb-2">üìä</div>
                    <div class="text-sm font-medium text-gray-600">Datos Precisos</div>
                </div>
                <div class="stagger-item">
                    <div class="text-3xl mb-2">ü§±</div>
                    <div class="text-sm font-medium text-gray-600">Enfermer√≠a Especializada</div>
                </div>
            </div>
            
            <div class="mt-8 text-sm text-gray-500">
                <p><strong>Presentado por:</strong> [Tu Nombre]</p>
                <p><strong>Asesora:</strong> [Nombre de la Asesora]</p>
                <p><strong>Fecha:</strong> [Fecha de Presentaci√≥n]</p>
            </div>
        </div>
    </section>



    <!-- Slide 3: Funcionalidades Principales -->
    <section class="slide">
        <div class="card-elegant p-10 max-w-6xl w-full fade-in">
            <div class="text-center mb-10">
                <h2 class="text-4xl font-bold mb-4">
                    <span class="icon-gradient">‚öôÔ∏è Funcionalidades Principales</span>
                </h2>
                <p class="text-xl text-gray-600">Herramientas especializadas para el cuidado neonatal</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Somatometr√≠a -->
                <div class="bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-2xl border border-blue-200 stagger-item hover:shadow-lg transition-all">
                    <div class="text-center mb-4">
                        <div class="w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-3">
                            <span class="text-white text-2xl">üìè</span>
                        </div>
                        <h3 class="text-lg font-bold text-blue-800">Somatometr√≠a</h3>
                    </div>
                    <ul class="text-sm text-blue-700 space-y-2">
                        <li>‚úì Registro de peso, talla, per√≠metros</li>
                        <li>‚úì C√°lculo autom√°tico de IMC</li>
                        <li>‚úì √çndice ponderal</li>
                        <li>‚úì Seguimiento de crecimiento</li>
                    </ul>
                </div>
                
                <!-- Signos Vitales -->
                <div class="bg-gradient-to-br from-red-50 to-red-100 p-6 rounded-2xl border border-red-200 stagger-item hover:shadow-lg transition-all">
                    <div class="text-center mb-4">
                        <div class="w-16 h-16 bg-red-600 rounded-2xl flex items-center justify-center mx-auto mb-3">
                            <span class="text-white text-2xl">üíì</span>
                        </div>
                        <h3 class="text-lg font-bold text-red-800">Signos Vitales</h3>
                    </div>
                    <ul class="text-sm text-red-700 space-y-2">
                        <li>‚úì FC, FR, Temperatura, SatO2</li>
                        <li>‚úì Alertas por valores cr√≠ticos</li>
                        <li>‚úì Gr√°ficas de tendencias</li>
                        <li>‚úì Historial completo</li>
                    </ul>
                </div>
                
                <!-- Evaluaci√≥n Respiratoria -->
                <div class="bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-2xl border border-purple-200 stagger-item hover:shadow-lg transition-all">
                    <div class="text-center mb-4">
                        <div class="w-16 h-16 bg-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-3">
                            <span class="text-white text-2xl">ü´Å</span>
                        </div>
                        <h3 class="text-lg font-bold text-purple-800">Evaluaci√≥n Respiratoria</h3>
                    </div>
                    <ul class="text-sm text-purple-700 space-y-2">
                        <li>‚úì Escala de Silverman</li>
                        <li>‚úì Escala APGAR</li>
                        <li>‚úì Par√°metros ventilatorios</li>
                        <li>‚úì Modos de ventilaci√≥n</li>
                    </ul>
                </div>
                
                <!-- Laboratorios -->
                <div class="bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-2xl border border-green-200 stagger-item hover:shadow-lg transition-all">
                    <div class="text-center mb-4">
                        <div class="w-16 h-16 bg-green-600 rounded-2xl flex items-center justify-center mx-auto mb-3">
                            <span class="text-white text-2xl">üß™</span>
                        </div>
                        <h3 class="text-lg font-bold text-green-800">Laboratorios</h3>
                    </div>
                    <ul class="text-sm text-green-700 space-y-2">
                        <li>‚úì Biometr√≠a hem√°tica</li>
                        <li>‚úì Qu√≠mica sangu√≠nea</li>
                        <li>‚úì Marcadores inflamatorios</li>
                        <li>‚úì Alertas autom√°ticas</li>
                    </ul>
                </div>
                
                <!-- Farmacolog√≠a -->
                <div class="bg-gradient-to-br from-yellow-50 to-yellow-100 p-6 rounded-2xl border border-yellow-200 stagger-item hover:shadow-lg transition-all">
                    <div class="text-center mb-4">
                        <div class="w-16 h-16 bg-yellow-600 rounded-2xl flex items-center justify-center mx-auto mb-3">
                            <span class="text-white text-2xl">üíâ</span>
                        </div>
                        <h3 class="text-lg font-bold text-yellow-800">Farmacolog√≠a</h3>
                    </div>
                    <ul class="text-sm text-yellow-700 space-y-2">
                        <li>‚úì Prescripci√≥n de medicamentos</li>
                        <li>‚úì Control de administraci√≥n</li>
                        <li>‚úì C√°lculo de dosis</li>
                        <li>‚úì Anexo de documentos</li>
                    </ul>
                </div>
                
                <!-- Dispositivos M√©dicos -->
                <div class="bg-gradient-to-br from-indigo-50 to-indigo-100 p-6 rounded-2xl border border-indigo-200 stagger-item hover:shadow-lg transition-all">
                    <div class="text-center mb-4">
                        <div class="w-16 h-16 bg-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-3">
                            <span class="text-white text-2xl">üîå</span>
                        </div>
                        <h3 class="text-lg font-bold text-indigo-800">Dispositivos M√©dicos</h3>
                    </div>
                    <ul class="text-sm text-indigo-700 space-y-2">
                        <li>‚úì Calculadora cat√©ter umbilical</li>
                        <li>‚úì Longitud PICC line</li>
                        <li>‚úì Tubo orotraqueal</li>
                        <li>‚úì F√≥rmulas validadas</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>





    <!-- Slide 6: Formulario de Datos Cl√≠nicos -->
    <section class="slide">
        <div class="card-elegant p-8 max-w-7xl w-full fade-in overflow-y-auto max-h-screen">
            <div class="text-center mb-8">
                <h2 class="text-4xl font-bold mb-4">
                    <span class="icon-gradient">üìù Sistema de Ingreso de Datos</span>
                </h2>
                <p class="text-xl text-gray-600">Formulario completo para datos cl√≠nicos neonatales</p>
            </div>
            
            <form id="clinicalDataForm" class="space-y-8">
                <!-- Datos Demogr√°ficos -->
                <div class="bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-2xl border border-blue-200">
                    <h3 class="text-xl font-bold text-blue-800 mb-4 flex items-center">
                        <span class="mr-3">üë∂</span>
                        Datos Demogr√°ficos
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label for="expediente" class="block text-sm font-medium text-blue-700 mb-1">N√∫mero de Expediente</label>
                            <input type="text" id="expediente" name="expediente" class="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="NEO-2024-001">
                        </div>
                        <div>
                            <label for="fechaNacimiento" class="block text-sm font-medium text-blue-700 mb-1">Fecha de Nacimiento</label>
                            <input type="date" id="fechaNacimiento" name="fechaNacimiento" class="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="sexo" class="block text-sm font-medium text-blue-700 mb-1">Sexo</label>
                            <select id="sexo" name="sexo" class="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="">Seleccionar</option>
                                <option value="masculino">Masculino</option>
                                <option value="femenino">Femenino</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Edad Gestacional -->
                <div class="bg-gradient-to-br from-purple-50 to-pink-50 p-6 rounded-2xl border border-purple-200">
                    <h3 class="text-xl font-bold text-purple-800 mb-4 flex items-center">
                        <span class="mr-3">üìÖ</span>
                        Edad Gestacional
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label for="semanasGestacion" class="block text-sm font-medium text-purple-700 mb-1">Semanas de Gestaci√≥n</label>
                            <input type="number" id="semanasGestacion" name="semanasGestacion" min="20" max="45" class="w-full p-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500" placeholder="34">
                        </div>
                        <div>
                            <label for="diasGestacion" class="block text-sm font-medium text-purple-700 mb-1">D√≠as Adicionales</label>
                            <input type="number" id="diasGestacion" name="diasGestacion" min="0" max="6" class="w-full p-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500" placeholder="3">
                        </div>
                        <div class="flex items-end">
                            <div class="bg-white p-3 rounded-lg border border-purple-300 w-full">
                                <div class="text-sm font-medium text-purple-700">Clasificaci√≥n:</div>
                                <div id="clasificacionEG" class="text-purple-600 font-medium">-</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Somatometr√≠a -->
                <div class="bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-2xl border border-green-200">
                    <h3 class="text-xl font-bold text-green-800 mb-4 flex items-center">
                        <span class="mr-3">üìè</span>
                        Somatometr√≠a
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div>
                            <label for="peso" class="block text-sm font-medium text-green-700 mb-1">Peso (gramos)</label>
                            <input type="number" id="peso" name="peso" min="400" max="6000" class="w-full p-3 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500" placeholder="2450">
                        </div>
                        <div>
                            <label for="talla" class="block text-sm font-medium text-green-700 mb-1">Talla (cm)</label>
                            <input type="number" id="talla" name="talla" min="25" max="60" step="0.1" class="w-full p-3 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500" placeholder="45.0">
                        </div>
                        <div>
                            <label for="perimetroCefalico" class="block text-sm font-medium text-green-700 mb-1">Per√≠metro Cef√°lico (cm)</label>
                            <input type="number" id="perimetroCefalico" name="perimetroCefalico" min="20" max="45" step="0.1" class="w-full p-3 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500" placeholder="32.0">
                        </div>
                        <div>
                            <label for="perimetroToracico" class="block text-sm font-medium text-green-700 mb-1">Per√≠metro Tor√°cico (cm)</label>
                            <input type="number" id="perimetroToracico" name="perimetroToracico" min="15" max="40" step="0.1" class="w-full p-3 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500" placeholder="28.0">
                        </div>
                    </div>
                    
                    <!-- C√°lculos Autom√°ticos -->
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-white p-3 rounded-lg border border-green-300">
                            <div class="text-sm font-medium text-green-700">IMC (kg/m¬≤):</div>
                            <div id="imcCalculado" class="text-green-600 font-bold text-lg">-</div>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-green-300">
                            <div class="text-sm font-medium text-green-700">√çndice Ponderal:</div>
                            <div id="indicePonderal" class="text-green-600 font-bold text-lg">-</div>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-green-300">
                            <div class="text-sm font-medium text-green-700">Clasificaci√≥n:</div>
                            <div id="clasificacionPeso" class="text-green-600 font-medium">-</div>
                        </div>
                    </div>
                </div>

                <!-- Signos Vitales -->
                <div class="bg-gradient-to-br from-red-50 to-orange-50 p-6 rounded-2xl border border-red-200">
                    <h3 class="text-xl font-bold text-red-800 mb-4 flex items-center">
                        <span class="mr-3">üíì</span>
                        Signos Vitales
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                        <div>
                            <label for="frecuenciaCardiaca" class="block text-sm font-medium text-red-700 mb-1">FC (lpm)</label>
                            <input type="number" id="frecuenciaCardiaca" name="frecuenciaCardiaca" min="60" max="200" class="w-full p-3 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500" placeholder="145">
                        </div>
                        <div>
                            <label for="frecuenciaRespiratoria" class="block text-sm font-medium text-red-700 mb-1">FR (rpm)</label>
                            <input type="number" id="frecuenciaRespiratoria" name="frecuenciaRespiratoria" min="20" max="80" class="w-full p-3 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500" placeholder="42">
                        </div>
                        <div>
                            <label for="temperatura" class="block text-sm font-medium text-red-700 mb-1">Temperatura (¬∞C)</label>
                            <input type="number" id="temperatura" name="temperatura" min="35" max="40" step="0.1" class="w-full p-3 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500" placeholder="36.8">
                        </div>
                        <div>
                            <label for="saturacionO2" class="block text-sm font-medium text-red-700 mb-1">SatO2 (%)</label>
                            <input type="number" id="saturacionO2" name="saturacionO2" min="70" max="100" class="w-full p-3 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500" placeholder="98">
                        </div>
                        <div>
                            <label for="presionArterial" class="block text-sm font-medium text-red-700 mb-1">PA (mmHg)</label>
                            <input type="text" id="presionArterial" name="presionArterial" class="w-full p-3 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500" placeholder="65/40">
                        </div>
                    </div>
                    
                    <!-- Alertas Autom√°ticas -->
                    <div class="mt-4 bg-white p-3 rounded-lg border border-red-300">
                        <div class="text-sm font-medium text-red-700">Alertas Cl√≠nicas:</div>
                        <div id="alertasSignosVitales" class="font-medium text-green-600">Sin alertas</div>
                    </div>
                </div>

                <!-- Laboratorios Completos -->
                <div class="bg-gradient-to-br from-blue-50 to-cyan-50 p-6 rounded-2xl border border-blue-200">
                    <h3 class="text-xl font-bold text-blue-800 mb-4 flex items-center">
                        <span class="mr-3">üß™</span>
                        Laboratorios Completos
                    </h3>
                    
                    <!-- Biometr√≠a Hem√°tica -->
                    <div class="mb-6">
                        <h4 class="text-lg font-bold text-blue-700 mb-3">ü©∏ Biometr√≠a Hem√°tica</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <div>
                                <label for="hemoglobina" class="block text-sm font-medium text-blue-700 mb-1">Hemoglobina (g/dL)</label>
                                <input type="number" id="hemoglobina" name="hemoglobina" min="5" max="25" step="0.1" class="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="14.2">
                            </div>
                            <div>
                                <label for="hematocrito" class="block text-sm font-medium text-blue-700 mb-1">Hematocrito (%)</label>
                                <input type="number" id="hematocrito" name="hematocrito" min="15" max="70" class="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="42">
                            </div>
                            <div>
                                <label for="leucocitos" class="block text-sm font-medium text-blue-700 mb-1">Leucocitos (/ŒºL)</label>
                                <input type="number" id="leucocitos" name="leucocitos" min="1000" max="50000" class="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="8500">
                            </div>
                            <div>
                                <label for="plaquetas" class="block text-sm font-medium text-blue-700 mb-1">Plaquetas (/ŒºL)</label>
                                <input type="number" id="plaquetas" name="plaquetas" min="10000" max="800000" class="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="250000">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Qu√≠mica Sangu√≠nea -->
                    <div class="mb-6">
                        <h4 class="text-lg font-bold text-blue-700 mb-3">‚öóÔ∏è Qu√≠mica Sangu√≠nea</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                            <div>
                                <label for="glucosa" class="block text-sm font-medium text-blue-700 mb-1">Glucosa (mg/dL)</label>
                                <input type="number" id="glucosa" name="glucosa" min="20" max="300" class="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="85">
                            </div>
                            <div>
                                <label for="creatinina" class="block text-sm font-medium text-blue-700 mb-1">Creatinina (mg/dL)</label>
                                <input type="number" id="creatinina" name="creatinina" min="0.1" max="5" step="0.1" class="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="0.8">
                            </div>
                            <div>
                                <label for="bilirrubina" class="block text-sm font-medium text-blue-700 mb-1">Bilirrubina Total (mg/dL)</label>
                                <input type="number" id="bilirrubina" name="bilirrubina" min="0" max="30" step="0.1" class="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="8.5">
                            </div>
                            <div>
                                <label for="edadHoras" class="block text-sm font-medium text-blue-700 mb-1">Edad en Horas</label>
                                <input type="number" id="edadHoras" name="edadHoras" min="0" max="336" class="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="72">
                            </div>
                            <div>
                                <label for="pcr" class="block text-sm font-medium text-blue-700 mb-1">PCR (mg/L)</label>
                                <input type="number" id="pcr" name="pcr" min="0" max="100" step="0.1" class="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="0.8">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Resultado Laboratorios -->
                    <div class="mt-4 bg-white p-3 rounded-lg border border-blue-300">
                        <div class="text-sm font-medium text-blue-700">Alertas de Laboratorio:</div>
                        <div id="alertasLaboratorio" class="font-medium text-green-600">Sin alertas</div>
                    </div>
                    
                    <!-- Gr√°fica de Bilirrubina NICE -->
                    <div class="mt-6 bg-gradient-to-br from-yellow-50 to-orange-50 p-6 rounded-2xl border border-yellow-200">
                        <h4 class="text-xl font-bold text-yellow-800 mb-4 flex items-center">
                            <span class="mr-3">üìä</span>
                            Gr√°fica de Bilirrubina - Gu√≠as NICE
                        </h4>
                        
                        <!-- Canvas para la gr√°fica -->
                        <div class="bg-white p-4 rounded-xl border border-yellow-300 mb-4">
                            <canvas id="bilirubinChart" width="600" height="400" class="w-full max-w-full"></canvas>
                        </div>
                        
                        <!-- Interpretaci√≥n -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white p-4 rounded-xl border border-yellow-300">
                                <div class="text-sm font-medium text-yellow-700">Nivel de Riesgo:</div>
                                <div id="riesgoBilirrubina" class="text-yellow-600 font-bold text-lg">-</div>
                            </div>
                            <div class="bg-white p-4 rounded-xl border border-yellow-300">
                                <div class="text-sm font-medium text-yellow-700">Recomendaci√≥n:</div>
                                <div id="recomendacionBilirrubina" class="text-yellow-600 font-medium">Ingrese valores</div>
                            </div>
                        </div>
                        
                        <!-- Leyenda de la gr√°fica -->
                        <div class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-2 text-xs">
                            <div class="flex items-center">
                                <div class="w-4 h-2 bg-green-500 mr-2"></div>
                                <span>Zona Segura</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-4 h-2 bg-yellow-500 mr-2"></div>
                                <span>Zona de Vigilancia</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-4 h-2 bg-orange-500 mr-2"></div>
                                <span>Zona de Riesgo</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-4 h-2 bg-red-500 mr-2"></div>
                                <span>Zona Cr√≠tica</span>
                            </div>
                        </div>
                        
                        <!-- Informaci√≥n adicional -->
                        <div class="mt-4 bg-blue-50 p-4 rounded-xl border border-blue-200">
                            <h5 class="font-bold text-blue-700 mb-2">üìã Criterios NICE para Fototerapia:</h5>
                            <div class="text-sm text-blue-600 space-y-1">
                                <div>‚Ä¢ <strong>‚â•38 semanas:</strong> Iniciar fototerapia seg√∫n gr√°fica</div>
                                <div>‚Ä¢ <strong>35-37 semanas:</strong> Umbral reducido en 50 Œºmol/L</div>
                                <div>‚Ä¢ <strong>&lt;35 semanas:</strong> Usar gr√°ficas espec√≠ficas para prematuros</div>
                                <div>‚Ä¢ <strong>Exanguinotransfusi√≥n:</strong> 50 Œºmol/L por encima del umbral de fototerapia</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Escala APGAR -->
                <div class="bg-gradient-to-br from-yellow-50 to-amber-50 p-6 rounded-2xl border border-yellow-200">
                    <h3 class="text-xl font-bold text-yellow-800 mb-4 flex items-center">
                        <span class="mr-3">üíì</span>
                        Escala APGAR
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                        <div>
                            <label for="apgarFC" class="block text-sm font-medium text-yellow-700 mb-1">Frecuencia Card√≠aca</label>
                            <select id="apgarFC" name="apgarFC" class="w-full p-3 border border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500">
                                <option value="">-</option>
                                <option value="0">0 - Ausente</option>
                                <option value="1">1 - <100 lpm</option>
                                <option value="2">2 - >100 lpm</option>
                            </select>
                        </div>
                        <div>
                            <label for="apgarResp" class="block text-sm font-medium text-yellow-700 mb-1">Esfuerzo Respiratorio</label>
                            <select id="apgarResp" name="apgarResp" class="w-full p-3 border border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500">
                                <option value="">-</option>
                                <option value="0">0 - Ausente</option>
                                <option value="1">1 - D√©bil/irregular</option>
                                <option value="2">2 - Llanto vigoroso</option>
                            </select>
                        </div>
                        <div>
                            <label for="apgarTono" class="block text-sm font-medium text-yellow-700 mb-1">Tono Muscular</label>
                            <select id="apgarTono" name="apgarTono" class="w-full p-3 border border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500">
                                <option value="">-</option>
                                <option value="0">0 - Fl√°cido</option>
                                <option value="1">1 - Flexi√≥n leve</option>
                                <option value="2">2 - Movimiento activo</option>
                            </select>
                        </div>
                        <div>
                            <label for="apgarReflejo" class="block text-sm font-medium text-yellow-700 mb-1">Irritabilidad Refleja</label>
                            <select id="apgarReflejo" name="apgarReflejo" class="w-full p-3 border border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500">
                                <option value="">-</option>
                                <option value="0">0 - Sin respuesta</option>
                                <option value="1">1 - Mueca</option>
                                <option value="2">2 - Llanto/tos</option>
                            </select>
                        </div>
                        <div>
                            <label for="apgarColor" class="block text-sm font-medium text-yellow-700 mb-1">Coloraci√≥n</label>
                            <select id="apgarColor" name="apgarColor" class="w-full p-3 border border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500">
                                <option value="">-</option>
                                <option value="0">0 - Cianosis central</option>
                                <option value="1">1 - Cianosis perif√©rica</option>
                                <option value="2">2 - Rosado</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Resultado APGAR -->
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white p-3 rounded-lg border border-yellow-300">
                            <div class="text-sm font-medium text-yellow-700">Puntuaci√≥n Total:</div>
                            <div id="apgarTotal" class="text-yellow-600 font-bold text-2xl">0</div>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-yellow-300">
                            <div class="text-sm font-medium text-yellow-700">Interpretaci√≥n:</div>
                            <div id="apgarInterpretacion" class="text-yellow-600 font-medium">Ingrese valores</div>
                        </div>
                    </div>
                </div>



                <!-- Escala de Silverman -->
                <div class="bg-gradient-to-br from-indigo-50 to-blue-50 p-6 rounded-2xl border border-indigo-200">
                    <h3 class="text-xl font-bold text-indigo-800 mb-4 flex items-center">
                        <span class="mr-3">ü´Å</span>
                        Escala de Silverman
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                        <div>
                            <label for="silvermanIntercostal" class="block text-sm font-medium text-indigo-700 mb-1">Retracci√≥n Intercostal</label>
                            <select id="silvermanIntercostal" name="silvermanIntercostal" class="w-full p-3 border border-indigo-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="0">0 - Ausente</option>
                                <option value="1">1 - Leve</option>
                                <option value="2">2 - Marcada</option>
                            </select>
                        </div>
                        <div>
                            <label for="silvermanXifoidea" class="block text-sm font-medium text-indigo-700 mb-1">Retracci√≥n Xifoidea</label>
                            <select id="silvermanXifoidea" name="silvermanXifoidea" class="w-full p-3 border border-indigo-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="0">0 - Ausente</option>
                                <option value="1">1 - Leve</option>
                                <option value="2">2 - Marcada</option>
                            </select>
                        </div>
                        <div>
                            <label for="silvermanSupraclavicular" class="block text-sm font-medium text-indigo-700 mb-1">Retracci√≥n Supraclavicular</label>
                            <select id="silvermanSupraclavicular" name="silvermanSupraclavicular" class="w-full p-3 border border-indigo-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="0">0 - Ausente</option>
                                <option value="1">1 - Leve</option>
                                <option value="2">2 - Marcada</option>
                            </select>
                        </div>
                        <div>
                            <label for="silvermanAleteoNasal" class="block text-sm font-medium text-indigo-700 mb-1">Aleteo Nasal</label>
                            <select id="silvermanAleteoNasal" name="silvermanAleteoNasal" class="w-full p-3 border border-indigo-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="0">0 - Ausente</option>
                                <option value="1">1 - Leve</option>
                                <option value="2">2 - Marcado</option>
                            </select>
                        </div>
                        <div>
                            <label for="silvermanQuejido" class="block text-sm font-medium text-indigo-700 mb-1">Quejido Espiratorio</label>
                            <select id="silvermanQuejido" name="silvermanQuejido" class="w-full p-3 border border-indigo-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="0">0 - Ausente</option>
                                <option value="1">1 - Audible con estetoscopio</option>
                                <option value="2">2 - Audible sin estetoscopio</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Resultado Silverman -->
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white p-3 rounded-lg border border-indigo-300">
                            <div class="text-sm font-medium text-indigo-700">Puntuaci√≥n Total:</div>
                            <div id="silvermanTotal" class="text-indigo-600 font-bold text-2xl">0</div>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-indigo-300">
                            <div class="text-sm font-medium text-indigo-700">Interpretaci√≥n:</div>
                            <div id="silvermanInterpretacion" class="text-indigo-600 font-medium">Sin dificultad respiratoria</div>
                        </div>
                    </div>
                </div>

                <!-- Escala de Dolor Neonatal (NIPS) -->
                <div class="bg-gradient-to-br from-pink-50 to-rose-50 p-6 rounded-2xl border border-pink-200">
                    <h3 class="text-xl font-bold text-pink-800 mb-4 flex items-center">
                        <span class="mr-3">üò£</span>
                        Escala de Dolor Neonatal (NIPS)
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4">
                        <div>
                            <label for="nipsExpresion" class="block text-sm font-medium text-pink-700 mb-1">Expresi√≥n Facial</label>
                            <select id="nipsExpresion" name="nipsExpresion" class="w-full p-3 border border-pink-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500">
                                <option value="0">0 - Relajada</option>
                                <option value="1">1 - Contra√≠da</option>
                            </select>
                        </div>
                        <div>
                            <label for="nipsLlanto" class="block text-sm font-medium text-pink-700 mb-1">Llanto</label>
                            <select id="nipsLlanto" name="nipsLlanto" class="w-full p-3 border border-pink-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500">
                                <option value="0">0 - Sin llanto</option>
                                <option value="1">1 - Quejido</option>
                                <option value="2">2 - Llanto vigoroso</option>
                            </select>
                        </div>
                        <div>
                            <label for="nipsRespiracion" class="block text-sm font-medium text-pink-700 mb-1">Patr√≥n Respiratorio</label>
                            <select id="nipsRespiracion" name="nipsRespiracion" class="w-full p-3 border border-pink-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500">
                                <option value="0">0 - Relajado</option>
                                <option value="1">1 - Diferente al basal</option>
                            </select>
                        </div>
                        <div>
                            <label for="nipsBrazos" class="block text-sm font-medium text-pink-700 mb-1">Brazos</label>
                            <select id="nipsBrazos" name="nipsBrazos" class="w-full p-3 border border-pink-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500">
                                <option value="0">0 - Relajados</option>
                                <option value="1">1 - Flexionados/extendidos</option>
                            </select>
                        </div>
                        <div>
                            <label for="nipsPiernas" class="block text-sm font-medium text-pink-700 mb-1">Piernas</label>
                            <select id="nipsPiernas" name="nipsPiernas" class="w-full p-3 border border-pink-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500">
                                <option value="0">0 - Relajadas</option>
                                <option value="1">1 - Flexionadas/extendidas</option>
                            </select>
                        </div>
                        <div>
                            <label for="nipsAlerta" class="block text-sm font-medium text-pink-700 mb-1">Estado de Alerta</label>
                            <select id="nipsAlerta" name="nipsAlerta" class="w-full p-3 border border-pink-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500">
                                <option value="0">0 - Dormido/tranquilo</option>
                                <option value="1">1 - Inquieto/agitado</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Resultado NIPS -->
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white p-3 rounded-lg border border-pink-300">
                            <div class="text-sm font-medium text-pink-700">Puntuaci√≥n Total:</div>
                            <div id="nipsTotal" class="text-pink-600 font-bold text-2xl">0</div>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-pink-300">
                            <div class="text-sm font-medium text-pink-700">Interpretaci√≥n:</div>
                            <div id="nipsInterpretacion" class="text-pink-600 font-medium">Sin dolor</div>
                        </div>
                    </div>
                    
                    <!-- Recomendaciones NIPS -->
                    <div class="mt-4 bg-white p-4 rounded-lg border border-pink-300">
                        <div class="text-sm font-medium text-pink-700 mb-2">Recomendaciones:</div>
                        <div id="nipsRecomendaciones" class="text-pink-600 text-sm">Continuar vigilancia</div>
                    </div>
                </div>

                <!-- Escala de Riesgo de Ca√≠das Neonatal -->
                <div class="bg-gradient-to-br from-amber-50 to-yellow-50 p-6 rounded-2xl border border-amber-200">
                    <h3 class="text-xl font-bold text-amber-800 mb-4 flex items-center">
                        <span class="mr-3">‚ö†Ô∏è</span>
                        Escala de Riesgo de Ca√≠das Neonatal
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div>
                            <label for="caidaEdadGestacional" class="block text-sm font-medium text-amber-700 mb-1">Edad Gestacional</label>
                            <select id="caidaEdadGestacional" name="caidaEdadGestacional" class="w-full p-3 border border-amber-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                                <option value="0">0 - ‚â•37 semanas</option>
                                <option value="1">1 - 32-36 semanas</option>
                                <option value="2">2 - <32 semanas</option>
                            </select>
                        </div>
                        <div>
                            <label for="caidaMovilidad" class="block text-sm font-medium text-amber-700 mb-1">Movilidad</label>
                            <select id="caidaMovilidad" name="caidaMovilidad" class="w-full p-3 border border-amber-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                                <option value="0">0 - Movimiento limitado</option>
                                <option value="1">1 - Movimiento moderado</option>
                                <option value="2">2 - Muy activo</option>
                            </select>
                        </div>
                        <div>
                            <label for="caidaDispositivos" class="block text-sm font-medium text-amber-700 mb-1">Dispositivos M√©dicos</label>
                            <select id="caidaDispositivos" name="caidaDispositivos" class="w-full p-3 border border-amber-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                                <option value="0">0 - Ninguno</option>
                                <option value="1">1 - 1-2 dispositivos</option>
                                <option value="2">2 - >2 dispositivos</option>
                            </select>
                        </div>
                        <div>
                            <label for="caidaMedicamentos" class="block text-sm font-medium text-amber-700 mb-1">Medicamentos Sedantes</label>
                            <select id="caidaMedicamentos" name="caidaMedicamentos" class="w-full p-3 border border-amber-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                                <option value="0">0 - Ninguno</option>
                                <option value="1">1 - Sedaci√≥n leve</option>
                                <option value="2">2 - Sedaci√≥n profunda</option>
                            </select>
                        </div>
                        <div>
                            <label for="caidaAmbiente" class="block text-sm font-medium text-amber-700 mb-1">Ambiente</label>
                            <select id="caidaAmbiente" name="caidaAmbiente" class="w-full p-3 border border-amber-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                                <option value="0">0 - Incubadora cerrada</option>
                                <option value="1">1 - Cuna t√©rmica</option>
                                <option value="2">2 - Cuna abierta</option>
                            </select>
                        </div>
                        <div>
                            <label for="caidaSupervision" class="block text-sm font-medium text-amber-700 mb-1">Supervisi√≥n</label>
                            <select id="caidaSupervision" name="caidaSupervision" class="w-full p-3 border border-amber-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                                <option value="0">0 - Continua</option>
                                <option value="1">1 - Frecuente</option>
                                <option value="2">2 - Intermitente</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Resultado Ca√≠das -->
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white p-3 rounded-lg border border-amber-300">
                            <div class="text-sm font-medium text-amber-700">Puntuaci√≥n Total:</div>
                            <div id="caidaTotal" class="text-amber-600 font-bold text-2xl">0</div>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-amber-300">
                            <div class="text-sm font-medium text-amber-700">Nivel de Riesgo:</div>
                            <div id="caidaRiesgo" class="text-amber-600 font-medium">Bajo riesgo</div>
                        </div>
                    </div>
                    
                    <!-- Medidas Preventivas -->
                    <div class="mt-4 bg-white p-4 rounded-lg border border-amber-300">
                        <div class="text-sm font-medium text-amber-700 mb-2">Medidas Preventivas:</div>
                        <div id="caidaMedidas" class="text-amber-600 text-sm">Medidas est√°ndar de seguridad</div>
                    </div>
                </div>

                <!-- Escala de Riesgo de UPP (Braden Q Neonatal) -->
                <div class="bg-gradient-to-br from-teal-50 to-cyan-50 p-6 rounded-2xl border border-teal-200">
                    <h3 class="text-xl font-bold text-teal-800 mb-4 flex items-center">
                        <span class="mr-3">üõ°Ô∏è</span>
                        Escala de Riesgo de UPP (Braden Q Neonatal)
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div>
                            <label for="bradenMovilidad" class="block text-sm font-medium text-teal-700 mb-1">Movilidad</label>
                            <select id="bradenMovilidad" name="bradenMovilidad" class="w-full p-3 border border-teal-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                <option value="1">1 - Completamente inm√≥vil</option>
                                <option value="2">2 - Muy limitada</option>
                                <option value="3">3 - Ligeramente limitada</option>
                                <option value="4">4 - Sin limitaciones</option>
                            </select>
                        </div>
                        <div>
                            <label for="bradenActividad" class="block text-sm font-medium text-teal-700 mb-1">Actividad</label>
                            <select id="bradenActividad" name="bradenActividad" class="w-full p-3 border border-teal-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                <option value="1">1 - Encamado</option>
                                <option value="2">2 - En silla</option>
                                <option value="3">3 - Camina ocasionalmente</option>
                                <option value="4">4 - Camina frecuentemente</option>
                            </select>
                        </div>
                        <div>
                            <label for="bradenPercepcion" class="block text-sm font-medium text-teal-700 mb-1">Percepci√≥n Sensorial</label>
                            <select id="bradenPercepcion" name="bradenPercepcion" class="w-full p-3 border border-teal-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                <option value="1">1 - Completamente limitada</option>
                                <option value="2">2 - Muy limitada</option>
                                <option value="3">3 - Ligeramente limitada</option>
                                <option value="4">4 - Sin limitaciones</option>
                            </select>
                        </div>
                        <div>
                            <label for="bradenHumedad" class="block text-sm font-medium text-teal-700 mb-1">Humedad</label>
                            <select id="bradenHumedad" name="bradenHumedad" class="w-full p-3 border border-teal-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                <option value="1">1 - Constantemente h√∫meda</option>
                                <option value="2">2 - Muy h√∫meda</option>
                                <option value="3">3 - Ocasionalmente h√∫meda</option>
                                <option value="4">4 - Raramente h√∫meda</option>
                            </select>
                        </div>
                        <div>
                            <label for="bradenNutricion" class="block text-sm font-medium text-teal-700 mb-1">Nutrici√≥n</label>
                            <select id="bradenNutricion" name="bradenNutricion" class="w-full p-3 border border-teal-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                <option value="1">1 - Muy pobre</option>
                                <option value="2">2 - Probablemente inadecuada</option>
                                <option value="3">3 - Adecuada</option>
                                <option value="4">4 - Excelente</option>
                            </select>
                        </div>
                        <div>
                            <label for="bradenFriccion" class="block text-sm font-medium text-teal-700 mb-1">Fricci√≥n y Cizallamiento</label>
                            <select id="bradenFriccion" name="bradenFriccion" class="w-full p-3 border border-teal-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                <option value="1">1 - Problema</option>
                                <option value="2">2 - Problema potencial</option>
                                <option value="3">3 - Sin problema aparente</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Resultado Braden -->
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white p-3 rounded-lg border border-teal-300">
                            <div class="text-sm font-medium text-teal-700">Puntuaci√≥n Total:</div>
                            <div id="bradenTotal" class="text-teal-600 font-bold text-2xl">23</div>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-teal-300">
                            <div class="text-sm font-medium text-teal-700">Nivel de Riesgo:</div>
                            <div id="bradenRiesgo" class="text-teal-600 font-medium">Bajo riesgo</div>
                        </div>
                    </div>
                    
                    <!-- Plan de Cuidados UPP -->
                    <div class="mt-4 bg-white p-4 rounded-lg border border-teal-300">
                        <div class="text-sm font-medium text-teal-700 mb-2">Plan de Cuidados:</div>
                        <div id="bradenPlan" class="text-teal-600 text-sm">Cuidados est√°ndar de la piel</div>
                    </div>
                </div>

                <!-- Modos Ventilatorios -->
                <div class="bg-gradient-to-br from-slate-50 to-gray-50 p-6 rounded-2xl border border-slate-200">
                    <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center">
                        <span class="mr-3">ü´Å</span>
                        Modos Ventilatorios y Par√°metros
                    </h3>
                    
                    <!-- Selecci√≥n de Modo Ventilatorio -->
                    <div class="mb-6">
                        <label for="modoVentilatorio" class="block text-sm font-medium text-slate-700 mb-2">Modo Ventilatorio</label>
                        <select id="modoVentilatorio" name="modoVentilatorio" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500">
                            <option value="">Seleccionar modo...</option>
                            <option value="SIMV">SIMV - Ventilaci√≥n Mandatoria Intermitente Sincronizada</option>
                            <option value="AC">A/C - Asistido/Controlado</option>
                            <option value="PSV">PSV - Ventilaci√≥n con Soporte de Presi√≥n</option>
                            <option value="CPAP">CPAP - Presi√≥n Positiva Continua</option>
                            <option value="HFOV">HFOV - Ventilaci√≥n Oscilatoria de Alta Frecuencia</option>
                            <option value="NIPPV">NIPPV - Ventilaci√≥n con Presi√≥n Positiva No Invasiva</option>
                            <option value="PRVC">PRVC - Ventilaci√≥n Regulada por Presi√≥n y Controlada por Volumen</option>
                            <option value="APRV">APRV - Ventilaci√≥n con Liberaci√≥n de Presi√≥n</option>
                        </select>
                    </div>
                    
                    <!-- Par√°metros Ventilatorios -->
                    <div id="parametrosVentilatorios" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                        <!-- Par√°metros b√°sicos siempre visibles -->
                        <div>
                            <label for="fio2" class="block text-sm font-medium text-slate-700 mb-1">FiO2 (%)</label>
                            <input type="number" id="fio2" name="fio2" min="21" max="100" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500" placeholder="40">
                        </div>
                        <div>
                            <label for="peep" class="block text-sm font-medium text-slate-700 mb-1">PEEP (cmH2O)</label>
                            <input type="number" id="peep" name="peep" min="0" max="20" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500" placeholder="5">
                        </div>
                        
                        <!-- Par√°metros espec√≠ficos por modo -->
                        <div id="parametroFR" class="hidden">
                            <label for="frecuenciaVentilatoria" class="block text-sm font-medium text-slate-700 mb-1">Frecuencia (rpm)</label>
                            <input type="number" id="frecuenciaVentilatoria" name="frecuenciaVentilatoria" min="10" max="80" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500" placeholder="40">
                        </div>
                        <div id="parametroPIP" class="hidden">
                            <label for="pip" class="block text-sm font-medium text-slate-700 mb-1">PIP (cmH2O)</label>
                            <input type="number" id="pip" name="pip" min="10" max="40" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500" placeholder="20">
                        </div>
                        <div id="parametroVT" class="hidden">
                            <label for="volumenTidal" class="block text-sm font-medium text-slate-700 mb-1">Volumen Tidal (mL/kg)</label>
                            <input type="number" id="volumenTidal" name="volumenTidal" min="3" max="10" step="0.1" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500" placeholder="6.0">
                        </div>
                        <div id="parametroPS" class="hidden">
                            <label for="presionSoporte" class="block text-sm font-medium text-slate-700 mb-1">Presi√≥n Soporte (cmH2O)</label>
                            <input type="number" id="presionSoporte" name="presionSoporte" min="5" max="25" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500" placeholder="10">
                        </div>
                        <div id="parametroTI" class="hidden">
                            <label for="tiempoInspiratorio" class="block text-sm font-medium text-slate-700 mb-1">Tiempo Inspiratorio (seg)</label>
                            <input type="number" id="tiempoInspiratorio" name="tiempoInspiratorio" min="0.2" max="1.5" step="0.1" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500" placeholder="0.4">
                        </div>
                        <div id="parametroMAP" class="hidden">
                            <label for="presionMediaVia" class="block text-sm font-medium text-slate-700 mb-1">MAP (cmH2O)</label>
                            <input type="number" id="presionMediaVia" name="presionMediaVia" min="5" max="25" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500" placeholder="12">
                        </div>
                        <div id="parametroAmplitud" class="hidden">
                            <label for="amplitud" class="block text-sm font-medium text-slate-700 mb-1">Amplitud (cmH2O)</label>
                            <input type="number" id="amplitud" name="amplitud" min="10" max="60" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500" placeholder="25">
                        </div>
                        <div id="parametroFrecuenciaHFOV" class="hidden">
                            <label for="frecuenciaHFOV" class="block text-sm font-medium text-slate-700 mb-1">Frecuencia HFOV (Hz)</label>
                            <input type="number" id="frecuenciaHFOV" name="frecuenciaHFOV" min="5" max="15" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500" placeholder="10">
                        </div>
                    </div>
                    
                    <!-- Informaci√≥n del Modo Seleccionado -->
                    <div id="infoModoVentilatorio" class="bg-white p-4 rounded-lg border border-slate-300 mb-4 hidden">
                        <div class="text-sm font-medium text-slate-700 mb-2">Informaci√≥n del Modo:</div>
                        <div id="descripcionModo" class="text-slate-600 text-sm mb-3"></div>
                        <div class="text-sm font-medium text-slate-700 mb-2">Indicaciones:</div>
                        <div id="indicacionesModo" class="text-slate-600 text-sm mb-3"></div>
                        <div class="text-sm font-medium text-slate-700 mb-2">Consideraciones:</div>
                        <div id="consideracionesModo" class="text-slate-600 text-sm"></div>
                    </div>
                    
                    <!-- C√°lculos Ventilatorios -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-white p-3 rounded-lg border border-slate-300">
                            <div class="text-sm font-medium text-slate-700">Relaci√≥n I:E:</div>
                            <div id="relacionIE" class="text-slate-600 font-bold text-lg">-</div>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-slate-300">
                            <div class="text-sm font-medium text-slate-700">Volumen Minuto (L/min):</div>
                            <div id="volumenMinuto" class="text-slate-600 font-bold text-lg">-</div>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-slate-300">
                            <div class="text-sm font-medium text-slate-700">√çndice de Oxigenaci√≥n:</div>
                            <div id="indiceOxigenacion" class="text-slate-600 font-bold text-lg">-</div>
                        </div>
                    </div>
                    
                    <!-- Alertas Ventilatorias -->
                    <div class="mt-4 bg-white p-3 rounded-lg border border-slate-300">
                        <div class="text-sm font-medium text-slate-700">Alertas Ventilatorias:</div>
                        <div id="alertasVentilatorias" class="font-medium text-green-600">Sin alertas</div>
                    </div>
                </div>

                <!-- Calculadoras M√©dicas Especializadas -->
                <div class="bg-gradient-to-br from-blue-50 to-indigo-50 p-8 rounded-2xl border border-blue-200">
                    <h3 class="text-2xl font-bold text-blue-800 mb-6 flex items-center">
                        <span class="mr-3">üßÆ</span>
                        Calculadoras M√©dicas Especializadas - FUNCIONALES
                    </h3>
                    
                    <!-- Calculadora de Cat√©ter Umbilical -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-xl shadow-lg border border-blue-200">
                            <h4 class="font-bold text-blue-700 mb-4 flex items-center">
                                <span class="mr-2">üìè</span>
                                Calculadora Cat√©ter Umbilical
                            </h4>
                            <div class="space-y-4">
                                <div>
                                    <label for="pesoCalculadora" class="block text-sm font-medium text-blue-700 mb-1">Peso del Neonato (kg)</label>
                                    <input type="number" id="pesoCalculadora" step="0.1" min="0.4" max="6" class="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="2.5">
                                </div>
                                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                    <div class="text-sm font-medium text-blue-700 mb-2">F√≥rmula de Dunn:</div>
                                    <div class="text-lg font-mono text-blue-600 mb-2">(Peso √ó 3) + 9 cm</div>
                                    <div class="text-sm text-blue-600">
                                        <strong>Resultado:</strong> <span id="resultadoCateter" class="font-bold text-lg">- cm</span>
                                    </div>
                                </div>
                                <div class="bg-green-50 p-3 rounded border border-green-200">
                                    <div class="text-xs text-green-700">
                                        <strong>Validaci√≥n:</strong> F√≥rmula est√°ndar NICE/AAP<br>
                                        <strong>Precisi√≥n:</strong> ¬±0.5 cm en 95% de casos
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Calculadora PICC Line -->
                        <div class="bg-white p-6 rounded-xl shadow-lg border border-purple-200">
                            <h4 class="font-bold text-purple-700 mb-4 flex items-center">
                                <span class="mr-2">üîå</span>
                                Calculadora PICC Line
                            </h4>
                            <div class="space-y-4">
                                <div>
                                    <label for="pesoPICC" class="block text-sm font-medium text-purple-700 mb-1">Peso (kg)</label>
                                    <input type="number" id="pesoPICC" step="0.1" min="0.4" max="6" class="w-full p-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500" placeholder="2.5">
                                </div>
                                <div>
                                    <label for="tallaPICC" class="block text-sm font-medium text-purple-700 mb-1">Talla (cm)</label>
                                    <input type="number" id="tallaPICC" step="0.1" min="25" max="60" class="w-full p-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500" placeholder="45">
                                </div>
                                <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                                    <div class="text-sm font-medium text-purple-700 mb-2">F√≥rmula Neonatal:</div>
                                    <div class="text-lg font-mono text-purple-600 mb-2">(Talla √ó 0.2) + 4 cm</div>
                                    <div class="text-sm text-purple-600">
                                        <strong>Longitud PICC:</strong> <span id="resultadoPICC" class="font-bold text-lg">- cm</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Calculadora Tubo Endotraqueal -->
                        <div class="bg-white p-6 rounded-xl shadow-lg border border-green-200">
                            <h4 class="font-bold text-green-700 mb-4 flex items-center">
                                <span class="mr-2">ü´Å</span>
                                Calculadora Tubo Endotraqueal
                            </h4>
                            <div class="space-y-4">
                                <div>
                                    <label for="pesoTubo" class="block text-sm font-medium text-green-700 mb-1">Peso (kg)</label>
                                    <input type="number" id="pesoTubo" step="0.1" min="0.4" max="6" class="w-full p-3 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500" placeholder="2.5">
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                    <div class="text-sm font-medium text-green-700 mb-2">F√≥rmulas Neonatales:</div>
                                    <div class="space-y-2 text-sm">
                                        <div><strong>Di√°metro:</strong> <span id="diametroTubo" class="font-bold">- mm</span></div>
                                        <div><strong>Profundidad:</strong> <span id="profundidadTubo" class="font-bold">- cm</span></div>
                                    </div>
                                </div>
                                <div class="bg-yellow-50 p-3 rounded border border-yellow-200">
                                    <div class="text-xs text-yellow-700">
                                        <strong>Regla:</strong> Peso + 6 cm desde labios<br>
                                        <strong>Verificar:</strong> Rx t√≥rax post-intubaci√≥n
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Calculadoras Adicionales -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Calculadora de Superficie Corporal -->
                        <div class="bg-white p-6 rounded-xl shadow-lg border border-orange-200">
                            <h4 class="font-bold text-orange-700 mb-4 flex items-center">
                                <span class="mr-2">üìê</span>
                                Superficie Corporal (Mosteller)
                            </h4>
                            <div class="space-y-4">
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label for="pesoSC" class="block text-sm font-medium text-orange-700 mb-1">Peso (kg)</label>
                                        <input type="number" id="pesoSC" step="0.1" min="0.4" max="6" class="w-full p-3 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500" placeholder="2.5">
                                    </div>
                                    <div>
                                        <label for="tallaSC" class="block text-sm font-medium text-orange-700 mb-1">Talla (cm)</label>
                                        <input type="number" id="tallaSC" step="0.1" min="25" max="60" class="w-full p-3 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500" placeholder="45">
                                    </div>
                                </div>
                                <div class="bg-orange-50 p-4 rounded-lg border border-orange-200">
                                    <div class="text-sm font-medium text-orange-700 mb-2">F√≥rmula de Mosteller:</div>
                                    <div class="text-lg font-mono text-orange-600 mb-2">‚àö(Peso √ó Talla / 3600)</div>
                                    <div class="text-sm text-orange-600">
                                        <strong>SC:</strong> <span id="resultadoSC" class="font-bold text-lg">- m¬≤</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Calculadora de Dosis por Peso -->
                        <div class="bg-white p-6 rounded-xl shadow-lg border border-red-200">
                            <h4 class="font-bold text-red-700 mb-4 flex items-center">
                                <span class="mr-2">üíä</span>
                                Calculadora de Dosis Pedi√°trica
                            </h4>
                            <div class="space-y-4">
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label for="pesoDosis" class="block text-sm font-medium text-red-700 mb-1">Peso (kg)</label>
                                        <input type="number" id="pesoDosis" step="0.1" min="0.4" max="6" class="w-full p-3 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500" placeholder="2.5">
                                    </div>
                                    <div>
                                        <label for="dosisMg" class="block text-sm font-medium text-red-700 mb-1">Dosis (mg/kg)</label>
                                        <input type="number" id="dosisMg" step="0.1" min="0.1" max="100" class="w-full p-3 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500" placeholder="10">
                                    </div>
                                </div>
                                <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                                    <div class="text-sm font-medium text-red-700 mb-2">C√°lculo de Dosis:</div>
                                    <div class="text-lg font-mono text-red-600 mb-2">Peso √ó Dosis/kg</div>
                                    <div class="text-sm text-red-600">
                                        <strong>Dosis Total:</strong> <span id="resultadoDosis" class="font-bold text-lg">- mg</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gr√°ficas de Percentiles -->
                <div class="bg-white p-6 rounded-lg border border-gray-300">
                    <div class="text-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-800 mb-2">
                            üìä Gr√°ficas de Percentiles de Crecimiento Neonatal
                        </h3>
                        <p class="text-gray-600">An√°lisis basado en est√°ndares Fenton</p>
                    </div>
                    
                    <!-- Selector de Gr√°fica -->
                    <div class="mb-6 bg-gray-50 p-4 rounded-lg border border-gray-200">
                        <h4 class="text-lg font-bold text-gray-700 mb-4">Seleccionar Tipo de An√°lisis</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                            <button type="button" onclick="mostrarGrafica('peso')" id="btnPeso" class="grafica-btn bg-blue-600 text-white px-4 py-3 rounded-lg font-medium hover:bg-blue-700 transition-all">
                                <div class="flex items-center justify-center space-x-2">
                                    <span>‚öñÔ∏è</span>
                                    <div class="text-left">
                                        <div class="font-bold">Peso</div>
                                        <div class="text-xs opacity-90">por Edad Gestacional</div>
                                    </div>
                                </div>
                            </button>
                            <button type="button" onclick="mostrarGrafica('talla')" id="btnTalla" class="grafica-btn bg-gray-300 text-gray-700 px-4 py-3 rounded-lg font-medium hover:bg-gray-400 transition-all">
                                <div class="flex items-center justify-center space-x-2">
                                    <span>üìè</span>
                                    <div class="text-left">
                                        <div class="font-bold">Talla</div>
                                        <div class="text-xs opacity-75">por Edad Gestacional</div>
                                    </div>
                                </div>
                            </button>
                            <button type="button" onclick="mostrarGrafica('pc')" id="btnPC" class="grafica-btn bg-gray-300 text-gray-700 px-4 py-3 rounded-lg font-medium hover:bg-gray-400 transition-all">
                                <div class="flex items-center justify-center space-x-2">
                                    <span>üß†</span>
                                    <div class="text-left">
                                        <div class="font-bold">Per√≠metro Cef√°lico</div>
                                        <div class="text-xs opacity-75">por Edad Gestacional</div>
                                    </div>
                                </div>
                            </button>
                        </div>
                    </div>
                    
                    <!-- √Årea de Gr√°ficas -->
                    <div class="bg-white p-6 rounded-lg border border-gray-200 mb-6">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h4 class="text-xl font-bold text-gray-800" id="tituloGrafica">Peso por Edad Gestacional - Percentiles Fenton</h4>
                                <p class="text-gray-600 text-sm">Est√°ndares internacionales de crecimiento neonatal</p>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm font-medium text-gray-700">Sexo:</span>
                                <select id="sexoGrafica" onchange="actualizarGrafica()" class="border border-gray-300 rounded px-3 py-1 text-sm">
                                    <option value="masculino">üë¶ Masculino</option>
                                    <option value="femenino">üëß Femenino</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Canvas para las gr√°ficas -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 mb-4">
                            <canvas id="percentileChart" width="800" height="500" class="w-full max-w-full"></canvas>
                            
                            <!-- Informaci√≥n de est√°ndares -->
                            <div class="text-right mt-2">
                                <div class="text-xs text-gray-500">Est√°ndares Fenton 2013</div>
                            </div>
                        </div>
                        
                        <!-- Informaci√≥n del punto del paciente -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                <div class="flex items-center space-x-2 mb-2">
                                    <span class="text-blue-600">üìä</span>
                                    <div class="text-sm font-medium text-blue-700">Valor del Paciente</div>
                                </div>
                                <div id="valorPaciente" class="text-blue-800 font-bold text-xl">-</div>
                            </div>
                            <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                                <div class="flex items-center space-x-2 mb-2">
                                    <span class="text-purple-600">üìà</span>
                                    <div class="text-sm font-medium text-purple-700">Percentil Estimado</div>
                                </div>
                                <div id="percentilPaciente" class="text-purple-800 font-bold text-xl">-</div>
                            </div>
                            <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                <div class="flex items-center space-x-2 mb-2">
                                    <span class="text-green-600">üéØ</span>
                                    <div class="text-sm font-medium text-green-700">Clasificaci√≥n</div>
                                </div>
                                <div id="clasificacionPercentil" class="text-green-800 font-bold text-lg">-</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tabla de Percentiles -->
                    <div class="bg-white p-6 rounded-xl border border-purple-300 mb-6">
                        <h4 class="text-xl font-bold text-purple-700 mb-4">üìã Tabla de Percentiles de Referencia</h4>
                        <div class="overflow-x-auto">
                            <table id="tablaPercentiles" class="w-full text-sm border-collapse border border-purple-300">
                                <thead class="bg-purple-100">
                                    <tr>
                                        <th class="border border-purple-300 px-3 py-2 text-purple-700">Edad Gestacional</th>
                                        <th class="border border-purple-300 px-3 py-2 text-purple-700">P3</th>
                                        <th class="border border-purple-300 px-3 py-2 text-purple-700">P10</th>
                                        <th class="border border-purple-300 px-3 py-2 text-purple-700">P25</th>
                                        <th class="border border-purple-300 px-3 py-2 text-purple-700">P50</th>
                                        <th class="border border-purple-300 px-3 py-2 text-purple-700">P75</th>
                                        <th class="border border-purple-300 px-3 py-2 text-purple-700">P90</th>
                                        <th class="border border-purple-300 px-3 py-2 text-purple-700">P97</th>
                                    </tr>
                                </thead>
                                <tbody id="cuerpoTablaPercentiles">
                                    <!-- Se llena din√°micamente -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Interpretaci√≥n Cl√≠nica -->
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200">
                        <h4 class="text-xl font-bold text-blue-700 mb-4">ü©∫ Interpretaci√≥n Cl√≠nica de Percentiles</h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h5 class="font-bold text-blue-600 mb-3">üìä Clasificaciones por Percentil:</h5>
                                <div class="space-y-2 text-sm">
                                    <div class="flex items-center">
                                        <div class="w-4 h-4 bg-red-500 rounded mr-2"></div>
                                        <span><strong>&lt; P3:</strong> Peque√±o para edad gestacional (PEG)</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-4 h-4 bg-orange-500 rounded mr-2"></div>
                                        <span><strong>P3-P10:</strong> Bajo peso, vigilancia estrecha</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-4 h-4 bg-green-500 rounded mr-2"></div>
                                        <span><strong>P10-P90:</strong> Adecuado para edad gestacional (AEG)</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-4 h-4 bg-orange-500 rounded mr-2"></div>
                                        <span><strong>P90-P97:</strong> Alto peso, vigilancia</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-4 h-4 bg-red-500 rounded mr-2"></div>
                                        <span><strong>&gt; P97:</strong> Grande para edad gestacional (GEG)</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <h5 class="font-bold text-blue-600 mb-3">‚öïÔ∏è Implicaciones Cl√≠nicas:</h5>
                                <div class="space-y-2 text-sm text-blue-700">
                                    <div><strong>PEG (&lt;P3):</strong> Riesgo de hipoglucemia, hipotermia, policitemia</div>
                                    <div><strong>GEG (&gt;P97):</strong> Riesgo de trauma obst√©trico, hipoglucemia</div>
                                    <div><strong>Seguimiento:</strong> Monitoreo seriado del crecimiento</div>
                                    <div><strong>Nutrici√≥n:</strong> Ajustar seg√∫n percentil y velocidad de crecimiento</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Recomendaciones espec√≠ficas -->
                        <div class="mt-6 bg-white p-4 rounded-lg border border-blue-200">
                            <h5 class="font-bold text-blue-700 mb-2">üìã Recomendaciones Espec√≠ficas para este Paciente:</h5>
                            <div id="recomendacionesPercentil" class="text-blue-600 text-sm">
                                Ingrese los datos antropom√©tricos para obtener recomendaciones personalizadas
                            </div>
                        </div>
                    </div>
                    
                    <!-- Gr√°fica de Velocidad de Crecimiento -->
                    <div class="mt-6 bg-white p-6 rounded-xl border border-purple-300">
                        <h4 class="text-xl font-bold text-purple-700 mb-4">üìà Velocidad de Crecimiento</h4>
                        <div class="mb-4">
                            <p class="text-sm text-purple-600 mb-4">Ingrese mediciones seriadas para calcular la velocidad de crecimiento:</p>
                            
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                                <div>
                                    <label class="block text-sm font-medium text-purple-700 mb-1">Fecha Medici√≥n</label>
                                    <input type="date" id="fechaMedicion" class="w-full p-2 border border-purple-300 rounded">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-purple-700 mb-1">Peso (g)</label>
                                    <input type="number" id="pesoMedicion" class="w-full p-2 border border-purple-300 rounded" placeholder="2500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-purple-700 mb-1">Talla (cm)</label>
                                    <input type="number" id="tallaMedicion" class="w-full p-2 border border-purple-300 rounded" placeholder="45.0" step="0.1">
                                </div>
                                <div class="flex items-end">
                                    <button type="button" onclick="agregarMedicion()" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700 transition-all">
                                        ‚ûï Agregar
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tabla de mediciones -->
                        <div class="overflow-x-auto mb-4">
                            <table id="tablaMediciones" class="w-full text-sm border-collapse border border-purple-300">
                                <thead class="bg-purple-100">
                                    <tr>
                                        <th class="border border-purple-300 px-3 py-2">Fecha</th>
                                        <th class="border border-purple-300 px-3 py-2">Peso (g)</th>
                                        <th class="border border-purple-300 px-3 py-2">Talla (cm)</th>
                                        <th class="border border-purple-300 px-3 py-2">Velocidad Peso (g/d√≠a)</th>
                                        <th class="border border-purple-300 px-3 py-2">Velocidad Talla (cm/sem)</th>
                                        <th class="border border-purple-300 px-3 py-2">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="cuerpoTablaMediciones">
                                    <tr>
                                        <td colspan="6" class="border border-purple-300 px-3 py-4 text-center text-purple-600">
                                            No hay mediciones registradas
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Interpretaci√≥n de velocidad -->
                        <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                            <h5 class="font-bold text-purple-700 mb-2">üìä Interpretaci√≥n de Velocidad de Crecimiento:</h5>
                            <div id="interpretacionVelocidad" class="text-purple-600 text-sm">
                                <div><strong>Peso esperado:</strong> 15-30 g/d√≠a en prematuros, 20-40 g/d√≠a en t√©rmino</div>
                                <div><strong>Talla esperada:</strong> 0.8-1.0 cm/semana en prematuros, 0.7-0.9 cm/semana en t√©rmino</div>
                                <div><strong>PC esperado:</strong> 0.5-0.8 cm/semana en prematuros</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Diagn√≥sticos de Enfermer√≠a e Intervenciones -->
                <div class="bg-gradient-to-br from-emerald-50 to-teal-50 p-8 rounded-2xl border border-emerald-200">
                    <h3 class="text-2xl font-bold text-emerald-800 mb-6 flex items-center">
                        <span class="mr-3">ü©∫</span>
                        Diagn√≥sticos de Enfermer√≠a e Intervenciones NANDA-NOC-NIC
                    </h3>
                    
                    <!-- Diagn√≥sticos Sugeridos Autom√°ticamente -->
                    <div class="mb-8 bg-white p-6 rounded-xl border border-emerald-300">
                        <h4 class="text-xl font-bold text-emerald-700 mb-4 flex items-center">
                            <span class="mr-2">ü§ñ</span>
                            Diagn√≥sticos Sugeridos Autom√°ticamente
                        </h4>
                        <div id="diagnosticosSugeridos" class="space-y-4">
                            <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                <p class="text-blue-700 text-sm">Los diagn√≥sticos se generar√°n autom√°ticamente basados en los datos cl√≠nicos ingresados</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Selector de Diagn√≥sticos Manuales -->
                    <div class="mb-8">
                        <h4 class="text-xl font-bold text-emerald-700 mb-4 flex items-center">
                            <span class="mr-2">üìã</span>
                            Diagn√≥sticos de Enfermer√≠a Adicionales
                        </h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Diagn√≥sticos Respiratorios -->
                            <div class="bg-white p-6 rounded-xl border border-emerald-300">
                                <h5 class="font-bold text-emerald-600 mb-3">ü´Å Patr√≥n Respiratorio</h5>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00032" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00032 - Patr√≥n respiratorio ineficaz</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00030" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00030 - Deterioro del intercambio de gases</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00031" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00031 - Limpieza ineficaz de las v√≠as a√©reas</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00033" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00033 - Ventilaci√≥n espont√°nea deteriorada</span>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Diagn√≥sticos Nutricionales -->
                            <div class="bg-white p-6 rounded-xl border border-emerald-300">
                                <h5 class="font-bold text-emerald-600 mb-3">üçº Nutrici√≥n y Alimentaci√≥n</h5>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00002" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00002 - Desequilibrio nutricional: inferior a las necesidades</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00107" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00107 - Patr√≥n de alimentaci√≥n ineficaz del lactante</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00104" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00104 - Lactancia materna ineficaz</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00027" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00027 - D√©ficit de volumen de l√≠quidos</span>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Diagn√≥sticos de Termorregulaci√≥n -->
                            <div class="bg-white p-6 rounded-xl border border-emerald-300">
                                <h5 class="font-bold text-emerald-600 mb-3">üå°Ô∏è Termorregulaci√≥n</h5>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00005" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00005 - Riesgo de desequilibrio de la temperatura corporal</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00006" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00006 - Hipotermia</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00007" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00007 - Hipertermia</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00008" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00008 - Termorregulaci√≥n ineficaz</span>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Diagn√≥sticos de Integridad Cut√°nea -->
                            <div class="bg-white p-6 rounded-xl border border-emerald-300">
                                <h5 class="font-bold text-emerald-600 mb-3">üõ°Ô∏è Integridad Cut√°nea</h5>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00046" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00046 - Deterioro de la integridad cut√°nea</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00047" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00047 - Riesgo de deterioro de la integridad cut√°nea</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00044" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00044 - Deterioro de la integridad tisular</span>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Diagn√≥sticos de Dolor -->
                            <div class="bg-white p-6 rounded-xl border border-emerald-300">
                                <h5 class="font-bold text-emerald-600 mb-3">üò£ Dolor y Confort</h5>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00132" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00132 - Dolor agudo</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00133" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00133 - Dolor cr√≥nico</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00214" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00214 - Disconfort</span>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Diagn√≥sticos de Riesgo de Infecci√≥n -->
                            <div class="bg-white p-6 rounded-xl border border-emerald-300">
                                <h5 class="font-bold text-emerald-600 mb-3">ü¶† Infecci√≥n y Seguridad</h5>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00004" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00004 - Riesgo de infecci√≥n</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00155" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00155 - Riesgo de ca√≠das</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="diagnosticos[]" value="00035" class="mr-2 text-emerald-600">
                                        <span class="text-sm">00035 - Riesgo de lesi√≥n</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Intervenciones de Enfermer√≠a (NIC) -->
                    <div class="mb-8">
                        <h4 class="text-xl font-bold text-emerald-700 mb-4 flex items-center">
                            <span class="mr-2">‚öïÔ∏è</span>
                            Intervenciones de Enfermer√≠a (NIC)
                        </h4>
                        
                        <div id="intervencionesContainer" class="space-y-4">
                            <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                <p class="text-blue-700 text-sm">Las intervenciones se mostrar√°n autom√°ticamente seg√∫n los diagn√≥sticos seleccionados</p>
                            </div>
                        </div>
                        
                        <!-- Bot√≥n para agregar intervenci√≥n personalizada -->
                        <div class="mt-4">
                            <button type="button" onclick="agregarIntervencionPersonalizada()" class="bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-all">
                                ‚ûï Agregar Intervenci√≥n Personalizada
                            </button>
                        </div>
                    </div>
                    
                    <!-- Resultados Esperados (NOC) -->
                    <div class="mb-8">
                        <h4 class="text-xl font-bold text-emerald-700 mb-4 flex items-center">
                            <span class="mr-2">üéØ</span>
                            Resultados Esperados (NOC)
                        </h4>
                        
                        <div id="resultadosContainer" class="space-y-4">
                            <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                <p class="text-blue-700 text-sm">Los resultados esperados se generar√°n seg√∫n los diagn√≥sticos seleccionados</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Plan de Cuidados Personalizado -->
                    <div class="mb-8">
                        <h4 class="text-xl font-bold text-emerald-700 mb-4 flex items-center">
                            <span class="mr-2">üìù</span>
                            Plan de Cuidados Personalizado
                        </h4>
                        
                        <div class="bg-white p-6 rounded-xl border border-emerald-300">
                            <label for="planCuidados" class="block text-sm font-medium text-emerald-700 mb-2">Observaciones y Plan de Cuidados Adicional</label>
                            <textarea id="planCuidados" name="planCuidados" rows="6" class="w-full p-4 border border-emerald-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500" placeholder="Ingrese observaciones espec√≠ficas, plan de cuidados personalizado, consideraciones especiales del paciente, etc."></textarea>
                        </div>
                    </div>
                    
                    <!-- Evaluaci√≥n y Seguimiento -->
                    <div class="mb-8">
                        <h4 class="text-xl font-bold text-emerald-700 mb-4 flex items-center">
                            <span class="mr-2">üìä</span>
                            Evaluaci√≥n y Seguimiento
                        </h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white p-4 rounded-xl border border-emerald-300">
                                <label for="proximaEvaluacion" class="block text-sm font-medium text-emerald-700 mb-2">Pr√≥xima Evaluaci√≥n</label>
                                <input type="datetime-local" id="proximaEvaluacion" name="proximaEvaluacion" class="w-full p-3 border border-emerald-300 rounded-lg focus:ring-2 focus:ring-emerald-500">
                            </div>
                            <div class="bg-white p-4 rounded-xl border border-emerald-300">
                                <label for="frecuenciaEvaluacion" class="block text-sm font-medium text-emerald-700 mb-2">Frecuencia de Evaluaci√≥n</label>
                                <select id="frecuenciaEvaluacion" name="frecuenciaEvaluacion" class="w-full p-3 border border-emerald-300 rounded-lg focus:ring-2 focus:ring-emerald-500">
                                    <option value="">Seleccionar frecuencia...</option>
                                    <option value="cada-2h">Cada 2 horas</option>
                                    <option value="cada-4h">Cada 4 horas</option>
                                    <option value="cada-6h">Cada 6 horas</option>
                                    <option value="cada-8h">Cada 8 horas</option>
                                    <option value="cada-12h">Cada 12 horas</option>
                                    <option value="diario">Diario</option>
                                    <option value="semanal">Semanal</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Botones de Acci√≥n Principales -->
                <div class="bg-gradient-to-r from-indigo-600 to-purple-600 p-8 rounded-2xl text-center">
                    <h3 class="text-2xl font-bold text-white mb-6">üéØ ACCIONES DEL SISTEMA</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <button type="submit" class="bg-white text-indigo-600 px-6 py-4 rounded-xl font-bold text-lg hover:bg-indigo-50 transition-all shadow-lg hover:shadow-xl transform hover:scale-105">
                            üìä GENERAR REPORTE COMPLETO
                        </button>
                        <button type="button" onclick="exportarDatos()" class="bg-green-600 text-white px-6 py-4 rounded-xl font-bold text-lg hover:bg-green-700 transition-all shadow-lg hover:shadow-xl transform hover:scale-105">
                            üíæ EXPORTAR DATOS
                        </button>
                        <button type="button" onclick="clearForm()" class="bg-red-600 text-white px-6 py-4 rounded-xl font-bold text-lg hover:bg-red-700 transition-all shadow-lg hover:shadow-xl transform hover:scale-105">
                            üóëÔ∏è LIMPIAR TODO
                        </button>
                    </div>
                    <div class="mt-6 text-white text-sm">
                        <p>‚úÖ Todas las funciones est√°n completamente operativas</p>
                        <p>üîÑ C√°lculos en tiempo real ‚Ä¢ üìã Validaciones m√©dicas ‚Ä¢ üìä Reportes autom√°ticos</p>
                    </div>
                </div>
            </form>

            <!-- √Årea de Resultados Mejorada -->
            <div id="resultsArea" class="hidden mt-8 bg-gradient-to-br from-green-50 to-emerald-50 p-8 rounded-2xl border border-green-200 shadow-2xl">
                <div class="text-center mb-8">
                    <h3 class="text-3xl font-bold text-green-800 mb-4 flex items-center justify-center">
                        <span class="mr-3">üìã</span>
                        REPORTE CL√çNICO INTEGRAL GENERADO
                    </h3>
                    <div class="bg-white p-4 rounded-xl border border-green-300 inline-block">
                        <p class="text-green-700 font-bold">‚úÖ Sistema NeoClinic - Reporte Autom√°tico</p>
                        <p class="text-sm text-green-600" id="fechaReporte"></p>
                    </div>
                </div>
                
                <!-- Resumen Ejecutivo -->
                <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-xl mb-6">
                    <h4 class="text-xl font-bold mb-3">üéØ RESUMEN EJECUTIVO</h4>
                    <div id="resumenEjecutivo" class="text-lg"></div>
                </div>
                
                <!-- Datos Cl√≠nicos Detallados -->
                <div id="clinicalSummary"></div>
                
                <!-- Alertas y Recomendaciones -->
                <div class="mt-6 bg-yellow-50 p-6 rounded-xl border border-yellow-300">
                    <h4 class="text-xl font-bold text-yellow-800 mb-4">‚ö†Ô∏è ALERTAS Y RECOMENDACIONES CL√çNICAS</h4>
                    <div id="alertasRecomendaciones" class="space-y-3"></div>
                </div>
                
                <!-- Acciones del Reporte -->
                <div class="mt-6 flex flex-col sm:flex-row gap-4 justify-center">
                    <button onclick="imprimirReporte()" class="bg-blue-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-blue-700 transition-all shadow-lg">
                        üñ®Ô∏è Imprimir Reporte
                    </button>
                    <button onclick="exportarReporte()" class="bg-green-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-700 transition-all shadow-lg">
                        üìÑ Exportar PDF
                    </button>
                    <button onclick="compartirReporte()" class="bg-purple-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-purple-700 transition-all shadow-lg">
                        üì§ Compartir
                    </button>
                </div>
            </div>
        </div>
    </section>



    <!-- Navegaci√≥n -->
    <div class="fixed bottom-6 right-6 flex space-x-3 z-50">
        <button onclick="previousSlide()" class="bg-white/90 backdrop-blur-lg text-gray-700 p-3 rounded-full shadow-lg hover:shadow-xl transition-all">
            <span class="text-xl">‚¨ÖÔ∏è</span>
        </button>
        <button onclick="nextSlide()" class="bg-white/90 backdrop-blur-lg text-gray-700 p-3 rounded-full shadow-lg hover:shadow-xl transition-all">
            <span class="text-xl">‚û°Ô∏è</span>
        </button>
    </div>

    <!-- Indicador de slides -->
    <div class="fixed bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-2 z-50">
        <div class="slide-indicator active w-3 h-3 bg-white rounded-full shadow-lg"></div>
        <div class="slide-indicator w-3 h-3 bg-white/50 rounded-full shadow-lg"></div>
        <div class="slide-indicator w-3 h-3 bg-white/50 rounded-full shadow-lg"></div>
        <div class="slide-indicator w-3 h-3 bg-white/50 rounded-full shadow-lg"></div>
    </div>

    <script>
        let currentSlide = 0;
        const slides = document.querySelectorAll('section');
        const indicators = document.querySelectorAll('.slide-indicator');
        
        function showSlide(index) {
            slides.forEach((slide, i) => {
                slide.style.display = i === index ? 'flex' : 'none';
            });
            
            indicators.forEach((indicator, i) => {
                indicator.classList.toggle('active', i === index);
                indicator.style.backgroundColor = i === index ? 'white' : 'rgba(255,255,255,0.5)';
            });
        }
        
        function nextSlide() {
            currentSlide = (currentSlide + 1) % slides.length;
            showSlide(currentSlide);
        }
        
        function previousSlide() {
            currentSlide = (currentSlide - 1 + slides.length) % slides.length;
            showSlide(currentSlide);
        }
        
        // Navegaci√≥n con teclado
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') {
                nextSlide();
            } else if (e.key === 'ArrowLeft') {
                previousSlide();
            }
        });
        
        // Inicializar
        showSlide(0);
        
        // Funciones de c√°lculo m√©dico
        function calcularIMC() {
            const peso = parseFloat(document.getElementById('peso').value);
            const talla = parseFloat(document.getElementById('talla').value);
            
            if (peso && talla) {
                const tallam = talla / 100; // Convertir cm a metros
                const imc = peso / 1000 / (tallam * tallam); // Convertir gramos a kg
                document.getElementById('imcCalculado').textContent = imc.toFixed(2);
                return imc;
            }
            return null;
        }
        
        function calcularIndicePonderal() {
            const peso = parseFloat(document.getElementById('peso').value);
            const talla = parseFloat(document.getElementById('talla').value);
            
            if (peso && talla) {
                const indicePonderal = (peso * 100) / Math.pow(talla, 3);
                document.getElementById('indicePonderal').textContent = indicePonderal.toFixed(2);
                return indicePonderal;
            }
            return null;
        }
        
        function clasificarEdadGestacional() {
            const semanas = parseInt(document.getElementById('semanasGestacion').value);
            const dias = parseInt(document.getElementById('diasGestacion').value) || 0;
            
            if (semanas) {
                const totalSemanas = semanas + (dias / 7);
                let clasificacion = '';
                
                if (totalSemanas < 28) {
                    clasificacion = 'Extremadamente prematuro';
                } else if (totalSemanas < 32) {
                    clasificacion = 'Muy prematuro';
                } else if (totalSemanas < 37) {
                    clasificacion = 'Prematuro tard√≠o';
                } else if (totalSemanas <= 42) {
                    clasificacion = 'A t√©rmino';
                } else {
                    clasificacion = 'Post-t√©rmino';
                }
                
                document.getElementById('clasificacionEG').textContent = `${semanas}+${dias} semanas - ${clasificacion}`;
                return clasificacion;
            }
            return null;
        }
        
        function clasificarPeso() {
            const peso = parseFloat(document.getElementById('peso').value);
            const semanas = parseInt(document.getElementById('semanasGestacion').value);
            
            if (peso && semanas) {
                let clasificacion = '';
                
                if (peso < 1000) {
                    clasificacion = 'Extremadamente bajo peso';
                } else if (peso < 1500) {
                    clasificacion = 'Muy bajo peso';
                } else if (peso < 2500) {
                    clasificacion = 'Bajo peso';
                } else if (peso <= 4000) {
                    clasificacion = 'Peso normal';
                } else {
                    clasificacion = 'Macros√≥mico';
                }
                
                document.getElementById('clasificacionPeso').textContent = clasificacion;
                return clasificacion;
            }
            return null;
        }
        
        function evaluarSignosVitales() {
            const fc = parseFloat(document.getElementById('frecuenciaCardiaca').value);
            const fr = parseFloat(document.getElementById('frecuenciaRespiratoria').value);
            const temp = parseFloat(document.getElementById('temperatura').value);
            const sat = parseFloat(document.getElementById('saturacionO2').value);
            
            let alertas = [];
            
            if (fc && (fc < 100 || fc > 180)) {
                alertas.push('FC anormal');
            }
            if (fr && (fr < 30 || fr > 60)) {
                alertas.push('FR anormal');
            }
            if (temp && (temp < 36.0 || temp > 37.5)) {
                alertas.push('Temperatura anormal');
            }
            if (sat && sat < 90) {
                alertas.push('SatO2 baja');
            }
            
            const alertText = alertas.length > 0 ? alertas.join(', ') : 'Sin alertas';
            document.getElementById('alertasSignosVitales').textContent = alertText;
            document.getElementById('alertasSignosVitales').className = 
                alertas.length > 0 ? 'font-medium text-red-600' : 'font-medium text-green-600';
        }
        
        // Funci√≥n para evaluar laboratorios
        function evaluarLaboratorios() {
            const hb = parseFloat(document.getElementById('hemoglobina').value);
            const hto = parseFloat(document.getElementById('hematocrito').value);
            const leucocitos = parseFloat(document.getElementById('leucocitos').value);
            const plaquetas = parseFloat(document.getElementById('plaquetas').value);
            const glucosa = parseFloat(document.getElementById('glucosa').value);
            const creatinina = parseFloat(document.getElementById('creatinina').value);
            const bilirrubina = parseFloat(document.getElementById('bilirrubina').value);
            const pcr = parseFloat(document.getElementById('pcr').value);
            
            let alertas = [];
            
            if (hb && (hb < 10 || hb > 20)) alertas.push('Hemoglobina anormal');
            if (hto && (hto < 30 || hto > 60)) alertas.push('Hematocrito anormal');
            if (leucocitos && (leucocitos < 5000 || leucocitos > 20000)) alertas.push('Leucocitos anormales');
            if (plaquetas && (plaquetas < 100000 || plaquetas > 500000)) alertas.push('Plaquetas anormales');
            if (glucosa && (glucosa < 40 || glucosa > 150)) alertas.push('Glucosa anormal');
            if (creatinina && creatinina > 1.5) alertas.push('Creatinina elevada');
            if (bilirrubina && bilirrubina > 12) alertas.push('Bilirrubina elevada');
            if (pcr && pcr > 10) alertas.push('PCR elevada');
            
            const alertText = alertas.length > 0 ? alertas.join(', ') : 'Sin alertas';
            document.getElementById('alertasLaboratorio').textContent = alertText;
            document.getElementById('alertasLaboratorio').className = 
                alertas.length > 0 ? 'font-medium text-red-600' : 'font-medium text-green-600';
                
            // Evaluar bilirrubina seg√∫n NICE
            evaluarBilirrubinaNCE();
        }
        
        // Funci√≥n para evaluar bilirrubina seg√∫n gu√≠as NICE
        function evaluarBilirrubinaNCE() {
            const bilirrubina = parseFloat(document.getElementById('bilirrubina').value);
            const edadHoras = parseFloat(document.getElementById('edadHoras').value);
            const semanasGestacion = parseFloat(document.getElementById('semanasGestacion').value);
            
            if (bilirrubina && edadHoras && semanasGestacion) {
                // Convertir mg/dL a Œºmol/L (factor 17.1)
                const bilirrubinaUmol = bilirrubina * 17.1;
                
                // Calcular umbral seg√∫n edad gestacional y horas de vida
                let umbralFototerapia = calcularUmbralFototerapia(edadHoras, semanasGestacion);
                let umbralExanguino = umbralFototerapia + 50;
                
                // Determinar zona de riesgo
                let riesgo, recomendacion, color;
                
                if (bilirrubinaUmol < umbralFototerapia * 0.7) {
                    riesgo = 'ZONA SEGURA';
                    recomendacion = 'Continuar vigilancia rutinaria';
                    color = 'text-green-600';
                } else if (bilirrubinaUmol < umbralFototerapia * 0.9) {
                    riesgo = 'ZONA DE VIGILANCIA';
                    recomendacion = 'Repetir bilirrubina en 6-12 horas';
                    color = 'text-yellow-600';
                } else if (bilirrubinaUmol < umbralFototerapia) {
                    riesgo = 'ZONA DE RIESGO';
                    recomendacion = 'Considerar fototerapia. Repetir en 4-6 horas';
                    color = 'text-orange-600';
                } else if (bilirrubinaUmol < umbralExanguino) {
                    riesgo = 'FOTOTERAPIA INDICADA';
                    recomendacion = 'INICIAR FOTOTERAPIA INMEDIATAMENTE';
                    color = 'text-red-600';
                } else {
                    riesgo = 'EXANGUINOTRANSFUSI√ìN';
                    recomendacion = 'CONSIDERAR EXANGUINOTRANSFUSI√ìN URGENTE';
                    color = 'text-red-800 font-bold';
                }
                
                document.getElementById('riesgoBilirrubina').textContent = riesgo;
                document.getElementById('riesgoBilirrubina').className = `font-bold text-lg ${color}`;
                document.getElementById('recomendacionBilirrubina').textContent = recomendacion;
                document.getElementById('recomendacionBilirrubina').className = `font-medium ${color}`;
                
                // Dibujar gr√°fica
                dibujarGraficaBilirrubina(edadHoras, bilirrubinaUmol, semanasGestacion);
            }
        }
        
        // Funci√≥n para calcular umbral de fototerapia seg√∫n NICE
        function calcularUmbralFototerapia(edadHoras, semanasGestacion) {
            // Umbrales base para ‚â•38 semanas seg√∫n horas de vida
            let umbralBase;
            
            if (edadHoras <= 24) {
                umbralBase = 150 + (edadHoras * 5);
            } else if (edadHoras <= 48) {
                umbralBase = 200 + ((edadHoras - 24) * 4);
            } else if (edadHoras <= 72) {
                umbralBase = 296 + ((edadHoras - 48) * 2);
            } else {
                umbralBase = 340;
            }
            
            // Ajustar seg√∫n edad gestacional
            if (semanasGestacion >= 38) {
                return umbralBase;
            } else if (semanasGestacion >= 35) {
                return umbralBase - 50; // Reducir 50 Œºmol/L para 35-37 semanas
            } else {
                return umbralBase - 100; // Reducir m√°s para <35 semanas
            }
        }
        
        // Funci√≥n para dibujar gr√°fica de bilirrubina
        function dibujarGraficaBilirrubina(edadHoras, bilirrubinaActual, semanasGestacion) {
            const canvas = document.getElementById('bilirubinChart');
            const ctx = canvas.getContext('2d');
            
            // Limpiar canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Configuraci√≥n de la gr√°fica
            const padding = 60;
            const width = canvas.width - 2 * padding;
            const height = canvas.height - 2 * padding;
            
            // Escalas
            const maxHoras = 168; // 7 d√≠as
            const maxBilirrubina = 500; // Œºmol/L
            
            // Dibujar ejes
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, padding + height);
            ctx.lineTo(padding + width, padding + height);
            ctx.stroke();
            
            // Etiquetas de ejes
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Edad (horas)', padding + width/2, canvas.height - 20);
            
            ctx.save();
            ctx.translate(20, padding + height/2);
            ctx.rotate(-Math.PI/2);
            ctx.fillText('Bilirrubina (Œºmol/L)', 0, 0);
            ctx.restore();
            
            // Dibujar l√≠neas de umbral
            const horas = [12, 24, 48, 72, 96, 120, 144, 168];
            
            // Zona segura (verde)
            ctx.fillStyle = 'rgba(34, 197, 94, 0.2)';
            ctx.beginPath();
            ctx.moveTo(padding, padding + height);
            for (let h of horas) {
                const x = padding + (h / maxHoras) * width;
                const umbral = calcularUmbralFototerapia(h, semanasGestacion);
                const y = padding + height - (umbral * 0.7 / maxBilirrubina) * height;
                ctx.lineTo(x, y);
            }
            ctx.lineTo(padding + width, padding + height);
            ctx.fill();
            
            // Zona de vigilancia (amarillo)
            ctx.fillStyle = 'rgba(234, 179, 8, 0.2)';
            ctx.beginPath();
            for (let i = 0; i < horas.length; i++) {
                const h = horas[i];
                const x = padding + (h / maxHoras) * width;
                const umbral = calcularUmbralFototerapia(h, semanasGestacion);
                const y1 = padding + height - (umbral * 0.7 / maxBilirrubina) * height;
                const y2 = padding + height - (umbral * 0.9 / maxBilirrubina) * height;
                if (i === 0) {
                    ctx.moveTo(x, y1);
                } else {
                    ctx.lineTo(x, y1);
                }
            }
            for (let i = horas.length - 1; i >= 0; i--) {
                const h = horas[i];
                const x = padding + (h / maxHoras) * width;
                const umbral = calcularUmbralFototerapia(h, semanasGestacion);
                const y2 = padding + height - (umbral * 0.9 / maxBilirrubina) * height;
                ctx.lineTo(x, y2);
            }
            ctx.fill();
            
            // Zona de riesgo (naranja)
            ctx.fillStyle = 'rgba(249, 115, 22, 0.2)';
            ctx.beginPath();
            for (let i = 0; i < horas.length; i++) {
                const h = horas[i];
                const x = padding + (h / maxHoras) * width;
                const umbral = calcularUmbralFototerapia(h, semanasGestacion);
                const y1 = padding + height - (umbral * 0.9 / maxBilirrubina) * height;
                const y2 = padding + height - (umbral / maxBilirrubina) * height;
                if (i === 0) {
                    ctx.moveTo(x, y1);
                } else {
                    ctx.lineTo(x, y1);
                }
            }
            for (let i = horas.length - 1; i >= 0; i--) {
                const h = horas[i];
                const x = padding + (h / maxHoras) * width;
                const umbral = calcularUmbralFototerapia(h, semanasGestacion);
                const y2 = padding + height - (umbral / maxBilirrubina) * height;
                ctx.lineTo(x, y2);
            }
            ctx.fill();
            
            // L√≠nea de fototerapia (rojo)
            ctx.strokeStyle = '#dc2626';
            ctx.lineWidth = 3;
            ctx.beginPath();
            for (let i = 0; i < horas.length; i++) {
                const h = horas[i];
                const x = padding + (h / maxHoras) * width;
                const umbral = calcularUmbralFototerapia(h, semanasGestacion);
                const y = padding + height - (umbral / maxBilirrubina) * height;
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // L√≠nea de exanguinotransfusi√≥n (rojo oscuro)
            ctx.strokeStyle = '#991b1b';
            ctx.lineWidth = 3;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            for (let i = 0; i < horas.length; i++) {
                const h = horas[i];
                const x = padding + (h / maxHoras) * width;
                const umbral = calcularUmbralFototerapia(h, semanasGestacion) + 50;
                const y = padding + height - (umbral / maxBilirrubina) * height;
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Punto actual del paciente
            if (edadHoras <= maxHoras && bilirrubinaActual <= maxBilirrubina) {
                const x = padding + (edadHoras / maxHoras) * width;
                const y = padding + height - (bilirrubinaActual / maxBilirrubina) * height;
                
                ctx.fillStyle = '#dc2626';
                ctx.beginPath();
                ctx.arc(x, y, 8, 0, 2 * Math.PI);
                ctx.fill();
                
                // Etiqueta del punto
                ctx.fillStyle = '#000';
                ctx.font = 'bold 12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(`${bilirrubinaActual.toFixed(0)} Œºmol/L`, x, y - 15);
            }
            
            // Marcas en los ejes
            ctx.fillStyle = '#666';
            ctx.font = '10px Arial';
            ctx.textAlign = 'center';
            
            // Marcas eje X (horas)
            for (let h = 0; h <= maxHoras; h += 24) {
                const x = padding + (h / maxHoras) * width;
                ctx.fillText(h.toString(), x, canvas.height - 5);
                
                // L√≠neas de cuadr√≠cula
                ctx.strokeStyle = '#e5e5e5';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(x, padding);
                ctx.lineTo(x, padding + height);
                ctx.stroke();
            }
            
            // Marcas eje Y (bilirrubina)
            for (let b = 0; b <= maxBilirrubina; b += 100) {
                const y = padding + height - (b / maxBilirrubina) * height;
                ctx.textAlign = 'right';
                ctx.fillText(b.toString(), padding - 10, y + 3);
                
                // L√≠neas de cuadr√≠cula
                ctx.strokeStyle = '#e5e5e5';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(padding + width, y);
                ctx.stroke();
            }
        }
        
        // Funci√≥n para calcular APGAR
        function calcularAPGAR() {
            const fc = parseInt(document.getElementById('apgarFC').value) || 0;
            const resp = parseInt(document.getElementById('apgarResp').value) || 0;
            const tono = parseInt(document.getElementById('apgarTono').value) || 0;
            const reflejo = parseInt(document.getElementById('apgarReflejo').value) || 0;
            const color = parseInt(document.getElementById('apgarColor').value) || 0;
            
            const total = fc + resp + tono + reflejo + color;
            document.getElementById('apgarTotal').textContent = total;
            
            let interpretacion = '';
            if (total >= 7) {
                interpretacion = 'Excelente condici√≥n';
            } else if (total >= 4) {
                interpretacion = 'Depresi√≥n moderada';
            } else {
                interpretacion = 'Depresi√≥n severa';
            }
            
            document.getElementById('apgarInterpretacion').textContent = interpretacion;
        }
        

        
        // Funci√≥n para calcular Silverman
        function calcularSilverman() {
            const intercostal = parseInt(document.getElementById('silvermanIntercostal').value) || 0;
            const xifoidea = parseInt(document.getElementById('silvermanXifoidea').value) || 0;
            const supraclavicular = parseInt(document.getElementById('silvermanSupraclavicular').value) || 0;
            const aleteo = parseInt(document.getElementById('silvermanAleteoNasal').value) || 0;
            const quejido = parseInt(document.getElementById('silvermanQuejido').value) || 0;
            
            const total = intercostal + xifoidea + supraclavicular + aleteo + quejido;
            document.getElementById('silvermanTotal').textContent = total;
            
            let interpretacion = '';
            if (total === 0) {
                interpretacion = 'Sin dificultad respiratoria';
            } else if (total <= 3) {
                interpretacion = 'Dificultad respiratoria leve';
            } else if (total <= 6) {
                interpretacion = 'Dificultad respiratoria moderada';
            } else {
                interpretacion = 'Dificultad respiratoria severa';
            }
            
            document.getElementById('silvermanInterpretacion').textContent = interpretacion;
        }
        
        // Funci√≥n para calcular NIPS (Dolor)
        function calcularNIPS() {
            const expresion = parseInt(document.getElementById('nipsExpresion').value) || 0;
            const llanto = parseInt(document.getElementById('nipsLlanto').value) || 0;
            const respiracion = parseInt(document.getElementById('nipsRespiracion').value) || 0;
            const brazos = parseInt(document.getElementById('nipsBrazos').value) || 0;
            const piernas = parseInt(document.getElementById('nipsPiernas').value) || 0;
            const alerta = parseInt(document.getElementById('nipsAlerta').value) || 0;
            
            const total = expresion + llanto + respiracion + brazos + piernas + alerta;
            document.getElementById('nipsTotal').textContent = total;
            
            let interpretacion = '';
            let recomendaciones = '';
            
            if (total <= 2) {
                interpretacion = 'Sin dolor';
                recomendaciones = 'Continuar vigilancia rutinaria';
            } else if (total <= 4) {
                interpretacion = 'Dolor moderado';
                recomendaciones = 'Considerar medidas de confort no farmacol√≥gicas';
            } else {
                interpretacion = 'Dolor severo';
                recomendaciones = 'EVALUAR ANALGESIA INMEDIATAMENTE - Medidas farmacol√≥gicas indicadas';
            }
            
            document.getElementById('nipsInterpretacion').textContent = interpretacion;
            document.getElementById('nipsRecomendaciones').textContent = recomendaciones;
        }
        
        // Funci√≥n para calcular Riesgo de Ca√≠das
        function calcularRiesgoCaidas() {
            const edadGest = parseInt(document.getElementById('caidaEdadGestacional').value) || 0;
            const movilidad = parseInt(document.getElementById('caidaMovilidad').value) || 0;
            const dispositivos = parseInt(document.getElementById('caidaDispositivos').value) || 0;
            const medicamentos = parseInt(document.getElementById('caidaMedicamentos').value) || 0;
            const ambiente = parseInt(document.getElementById('caidaAmbiente').value) || 0;
            const supervision = parseInt(document.getElementById('caidaSupervision').value) || 0;
            
            const total = edadGest + movilidad + dispositivos + medicamentos + ambiente + supervision;
            document.getElementById('caidaTotal').textContent = total;
            
            let riesgo = '';
            let medidas = '';
            
            if (total <= 3) {
                riesgo = 'Bajo riesgo';
                medidas = 'Medidas est√°ndar de seguridad: barandales elevados, supervisi√≥n rutinaria';
            } else if (total <= 6) {
                riesgo = 'Moderado riesgo';
                medidas = 'Medidas adicionales: supervisi√≥n frecuente, identificaci√≥n visual, educaci√≥n a padres';
            } else {
                riesgo = 'Alto riesgo';
                medidas = 'MEDIDAS INTENSIVAS: supervisi√≥n continua, alarmas activadas, restricci√≥n de movimiento si necesario';
            }
            
            document.getElementById('caidaRiesgo').textContent = riesgo;
            document.getElementById('caidaMedidas').textContent = medidas;
        }
        
        // Funci√≥n para calcular Braden (UPP)
        function calcularBraden() {
            const movilidad = parseInt(document.getElementById('bradenMovilidad').value) || 4;
            const actividad = parseInt(document.getElementById('bradenActividad').value) || 4;
            const percepcion = parseInt(document.getElementById('bradenPercepcion').value) || 4;
            const humedad = parseInt(document.getElementById('bradenHumedad').value) || 4;
            const nutricion = parseInt(document.getElementById('bradenNutricion').value) || 4;
            const friccion = parseInt(document.getElementById('bradenFriccion').value) || 3;
            
            const total = movilidad + actividad + percepcion + humedad + nutricion + friccion;
            document.getElementById('bradenTotal').textContent = total;
            
            let riesgo = '';
            let plan = '';
            
            if (total <= 16) {
                riesgo = 'Alto riesgo';
                plan = 'PLAN INTENSIVO: cambios posturales c/2h, colch√≥n especial, inspecci√≥n diaria, protecci√≥n de prominencias √≥seas';
            } else if (total <= 22) {
                riesgo = 'Moderado riesgo';
                plan = 'Plan preventivo: cambios posturales c/3h, hidrataci√≥n de piel, vigilancia de zonas de presi√≥n';
            } else {
                riesgo = 'Bajo riesgo';
                plan = 'Cuidados est√°ndar de la piel: higiene adecuada, cambios posturales rutinarios';
            }
            
            document.getElementById('bradenRiesgo').textContent = riesgo;
            document.getElementById('bradenPlan').textContent = plan;
        }
        
        // Funci√≥n para manejar modos ventilatorios
        function configurarModoVentilatorio() {
            const modo = document.getElementById('modoVentilatorio').value;
            const infoDiv = document.getElementById('infoModoVentilatorio');
            
            // Ocultar todos los par√°metros espec√≠ficos
            ['parametroFR', 'parametroPIP', 'parametroVT', 'parametroPS', 'parametroTI', 
             'parametroMAP', 'parametroAmplitud', 'parametroFrecuenciaHFOV'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            
            if (!modo) {
                infoDiv.classList.add('hidden');
                return;
            }
            
            infoDiv.classList.remove('hidden');
            
            const modosInfo = {
                'SIMV': {
                    descripcion: 'Ventilaci√≥n Mandatoria Intermitente Sincronizada. Combina respiraciones mandatorias con respiraciones espont√°neas del paciente.',
                    indicaciones: 'Destete ventilatorio, pacientes con drive respiratorio parcial, transici√≥n de ventilaci√≥n controlada a espont√°nea',
                    consideraciones: 'Permite respiraciones espont√°neas entre las mandatorias, reduce el trabajo respiratorio gradualmente',
                    parametros: ['parametroFR', 'parametroPIP', 'parametroVT', 'parametroPS', 'parametroTI']
                },
                'AC': {
                    descripcion: 'Asistido/Controlado. Cada respiraci√≥n es asistida o controlada por el ventilador con volumen o presi√≥n fija.',
                    indicaciones: 'Insuficiencia respiratoria aguda, pacientes sin drive respiratorio, sedaci√≥n profunda',
                    consideraciones: 'Control total de la ventilaci√≥n, puede causar alcalosis respiratoria si la frecuencia es muy alta',
                    parametros: ['parametroFR', 'parametroPIP', 'parametroVT', 'parametroTI']
                },
                'PSV': {
                    descripcion: 'Ventilaci√≥n con Soporte de Presi√≥n. Cada respiraci√≥n espont√°nea es asistida con presi√≥n de soporte.',
                    indicaciones: 'Destete ventilatorio, pacientes con drive respiratorio adecuado, trabajo respiratorio aumentado',
                    consideraciones: 'El paciente controla la frecuencia y el tiempo inspiratorio, mejora la sincron√≠a',
                    parametros: ['parametroPS']
                },
                'CPAP': {
                    descripcion: 'Presi√≥n Positiva Continua en la V√≠a A√©rea. Mantiene presi√≥n constante durante todo el ciclo respiratorio.',
                    indicaciones: 'Apnea del prematuro, atelectasias, edema pulmonar, destete de ventilaci√≥n mec√°nica',
                    consideraciones: 'Respiraci√≥n completamente espont√°nea, mejora la capacidad residual funcional',
                    parametros: []
                },
                'HFOV': {
                    descripcion: 'Ventilaci√≥n Oscilatoria de Alta Frecuencia. Utiliza vol√∫menes tidales muy peque√±os a alta frecuencia.',
                    indicaciones: 'S√≠ndrome de dificultad respiratoria severo, falla ventilatoria convencional, f√≠stula broncopleural',
                    consideraciones: 'Estrategia de pulm√≥n abierto, minimiza el barotrauma, requiere sedaci√≥n profunda',
                    parametros: ['parametroMAP', 'parametroAmplitud', 'parametroFrecuenciaHFOV']
                },
                'NIPPV': {
                    descripcion: 'Ventilaci√≥n con Presi√≥n Positiva No Invasiva. Soporte ventilatorio sin intubaci√≥n endotraqueal.',
                    indicaciones: 'Apnea del prematuro, destete de ventilaci√≥n invasiva, soporte respiratorio leve a moderado',
                    consideraciones: 'Preserva las defensas de la v√≠a a√©rea superior, reduce complicaciones de la intubaci√≥n',
                    parametros: ['parametroFR', 'parametroPIP', 'parametroTI']
                },
                'PRVC': {
                    descripcion: 'Ventilaci√≥n Regulada por Presi√≥n y Controlada por Volumen. Combina ventilaci√≥n por presi√≥n con volumen garantizado.',
                    indicaciones: 'Pacientes con compliance pulmonar variable, necesidad de volumen tidal consistente',
                    consideraciones: 'Ajusta autom√°ticamente la presi√≥n para mantener el volumen tidal objetivo',
                    parametros: ['parametroFR', 'parametroVT', 'parametroTI']
                },
                'APRV': {
                    descripcion: 'Ventilaci√≥n con Liberaci√≥n de Presi√≥n. Mantiene presi√≥n alta con liberaciones peri√≥dicas breves.',
                    indicaciones: 'SDRA severo, reclutamiento alveolar, pacientes con respiraci√≥n espont√°nea preservada',
                    consideraciones: 'Estrategia de pulm√≥n abierto, permite respiraci√≥n espont√°nea en cualquier momento',
                    parametros: ['parametroMAP', 'parametroTI']
                }
            };
            
            const info = modosInfo[modo];
            document.getElementById('descripcionModo').textContent = info.descripcion;
            document.getElementById('indicacionesModo').textContent = info.indicaciones;
            document.getElementById('consideracionesModo').textContent = info.consideraciones;
            
            // Mostrar par√°metros espec√≠ficos del modo
            info.parametros.forEach(param => {
                document.getElementById(param).classList.remove('hidden');
            });
            
            calcularParametrosVentilatorios();
        }
        
        // Funci√≥n para calcular par√°metros ventilatorios
        function calcularParametrosVentilatorios() {
            const modo = document.getElementById('modoVentilatorio').value;
            const fio2 = parseFloat(document.getElementById('fio2').value);
            const peep = parseFloat(document.getElementById('peep').value);
            const fr = parseFloat(document.getElementById('frecuenciaVentilatoria').value);
            const pip = parseFloat(document.getElementById('pip').value);
            const vt = parseFloat(document.getElementById('volumenTidal').value);
            const ti = parseFloat(document.getElementById('tiempoInspiratorio').value);
            const peso = parseFloat(document.getElementById('peso').value) / 1000; // Convertir a kg
            const sat = parseFloat(document.getElementById('saturacionO2').value);
            
            // Calcular relaci√≥n I:E
            if (fr && ti) {
                const cicloDuracion = 60 / fr; // Duraci√≥n total del ciclo en segundos
                const te = cicloDuracion - ti; // Tiempo espiratorio
                const relacionIE = `1:${(te / ti).toFixed(1)}`;
                document.getElementById('relacionIE').textContent = relacionIE;
            }
            
            // Calcular volumen minuto
            if (fr && vt && peso) {
                const volumenMinuto = (fr * vt * peso) / 1000; // L/min
                document.getElementById('volumenMinuto').textContent = volumenMinuto.toFixed(2);
            }
            
            // Calcular √≠ndice de oxigenaci√≥n
            if (fio2 && peep && pip) {
                const map = peep + ((pip - peep) * 0.5); // Aproximaci√≥n de MAP
                const indiceOx = (map * fio2) / (sat || 100);
                document.getElementById('indiceOxigenacion').textContent = indiceOx.toFixed(1);
            }
            
            // Evaluar alertas ventilatorias
            evaluarAlertasVentilatorias();
        }
        
        // Funci√≥n para evaluar alertas ventilatorias
        function evaluarAlertasVentilatorias() {
            const fio2 = parseFloat(document.getElementById('fio2').value);
            const peep = parseFloat(document.getElementById('peep').value);
            const pip = parseFloat(document.getElementById('pip').value);
            const fr = parseFloat(document.getElementById('frecuenciaVentilatoria').value);
            const vt = parseFloat(document.getElementById('volumenTidal').value);
            
            let alertas = [];
            
            if (fio2 && fio2 > 60) alertas.push('FiO2 elevada (>60%)');
            if (peep && peep > 8) alertas.push('PEEP elevada (>8 cmH2O)');
            if (pip && pip > 25) alertas.push('PIP elevada (>25 cmH2O)');
            if (pip && peep && (pip - peep) > 20) alertas.push('Presi√≥n driving elevada (>20 cmH2O)');
            if (fr && fr > 60) alertas.push('Frecuencia muy alta (>60 rpm)');
            if (vt && (vt < 4 || vt > 8)) alertas.push('Volumen tidal fuera de rango (4-8 mL/kg)');
            
            const alertText = alertas.length > 0 ? alertas.join(', ') : 'Sin alertas';
            document.getElementById('alertasVentilatorias').textContent = alertText;
            document.getElementById('alertasVentilatorias').className = 
                alertas.length > 0 ? 'font-medium text-red-600' : 'font-medium text-green-600';
        }
        
        // Funciones para calculadoras m√©dicas especializadas
        function calcularCateterUmbilical() {
            const peso = parseFloat(document.getElementById('pesoCalculadora').value);
            if (peso) {
                const longitud = (peso * 3) + 9;
                document.getElementById('resultadoCateter').textContent = longitud.toFixed(1) + ' cm';
                document.getElementById('resultadoCateter').className = 'font-bold text-lg text-blue-600';
            } else {
                document.getElementById('resultadoCateter').textContent = '- cm';
                document.getElementById('resultadoCateter').className = 'font-bold text-lg';
            }
        }
        
        function calcularPICCLine() {
            const peso = parseFloat(document.getElementById('pesoPICC').value);
            const talla = parseFloat(document.getElementById('tallaPICC').value);
            if (peso && talla) {
                const longitud = (talla * 0.2) + 4;
                document.getElementById('resultadoPICC').textContent = longitud.toFixed(1) + ' cm';
                document.getElementById('resultadoPICC').className = 'font-bold text-lg text-purple-600';
            } else {
                document.getElementById('resultadoPICC').textContent = '- cm';
                document.getElementById('resultadoPICC').className = 'font-bold text-lg';
            }
        }
        
        function calcularTuboEndotraqueal() {
            const peso = parseFloat(document.getElementById('pesoTubo').value);
            if (peso) {
                let diametro, profundidad;
                
                // C√°lculo del di√°metro seg√∫n peso
                if (peso < 1) {
                    diametro = 2.5;
                } else if (peso < 2) {
                    diametro = 3.0;
                } else if (peso < 3) {
                    diametro = 3.5;
                } else {
                    diametro = 4.0;
                }
                
                // C√°lculo de profundidad: peso + 6 cm
                profundidad = peso + 6;
                
                document.getElementById('diametroTubo').textContent = diametro.toFixed(1) + ' mm';
                document.getElementById('profundidadTubo').textContent = profundidad.toFixed(1) + ' cm';
                document.getElementById('diametroTubo').className = 'font-bold text-green-600';
                document.getElementById('profundidadTubo').className = 'font-bold text-green-600';
            } else {
                document.getElementById('diametroTubo').textContent = '- mm';
                document.getElementById('profundidadTubo').textContent = '- cm';
                document.getElementById('diametroTubo').className = 'font-bold';
                document.getElementById('profundidadTubo').className = 'font-bold';
            }
        }
        
        function calcularSuperficieCorporal() {
            const peso = parseFloat(document.getElementById('pesoSC').value);
            const talla = parseFloat(document.getElementById('tallaSC').value);
            if (peso && talla) {
                // F√≥rmula de Mosteller: ‚àö(peso √ó talla / 3600)
                const sc = Math.sqrt((peso * talla) / 3600);
                document.getElementById('resultadoSC').textContent = sc.toFixed(3) + ' m¬≤';
                document.getElementById('resultadoSC').className = 'font-bold text-lg text-orange-600';
            } else {
                document.getElementById('resultadoSC').textContent = '- m¬≤';
                document.getElementById('resultadoSC').className = 'font-bold text-lg';
            }
        }
        
        function calcularDosisPediatrica() {
            const peso = parseFloat(document.getElementById('pesoDosis').value);
            const dosisPorKg = parseFloat(document.getElementById('dosisMg').value);
            if (peso && dosisPorKg) {
                const dosisTotal = peso * dosisPorKg;
                document.getElementById('resultadoDosis').textContent = dosisTotal.toFixed(2) + ' mg';
                document.getElementById('resultadoDosis').className = 'font-bold text-lg text-red-600';
            } else {
                document.getElementById('resultadoDosis').textContent = '- mg';
                document.getElementById('resultadoDosis').className = 'font-bold text-lg';
            }
        }
        
        // Event listeners para c√°lculos autom√°ticos
        document.addEventListener('DOMContentLoaded', function() {
            // Calculadoras m√©dicas especializadas
            document.getElementById('pesoCalculadora').addEventListener('input', calcularCateterUmbilical);
            ['pesoPICC', 'tallaPICC'].forEach(id => {
                document.getElementById(id).addEventListener('input', calcularPICCLine);
            });
            document.getElementById('pesoTubo').addEventListener('input', calcularTuboEndotraqueal);
            ['pesoSC', 'tallaSC'].forEach(id => {
                document.getElementById(id).addEventListener('input', calcularSuperficieCorporal);
            });
            ['pesoDosis', 'dosisMg'].forEach(id => {
                document.getElementById(id).addEventListener('input', calcularDosisPediatrica);
            });
            // Somatometr√≠a
            ['peso', 'talla'].forEach(id => {
                document.getElementById(id).addEventListener('input', () => {
                    calcularIMC();
                    calcularIndicePonderal();
                    clasificarPeso();
                });
            });
            
            // Edad gestacional
            ['semanasGestacion', 'diasGestacion'].forEach(id => {
                document.getElementById(id).addEventListener('input', clasificarEdadGestacional);
            });
            
            // Signos vitales
            ['frecuenciaCardiaca', 'frecuenciaRespiratoria', 'temperatura', 'saturacionO2'].forEach(id => {
                document.getElementById(id).addEventListener('input', evaluarSignosVitales);
            });
            
            // Laboratorios
            ['hemoglobina', 'hematocrito', 'leucocitos', 'plaquetas', 'glucosa', 'creatinina', 'bilirrubina', 'pcr', 'edadHoras'].forEach(id => {
                document.getElementById(id).addEventListener('input', evaluarLaboratorios);
            });
            
            // APGAR
            ['apgarFC', 'apgarResp', 'apgarTono', 'apgarReflejo', 'apgarColor'].forEach(id => {
                document.getElementById(id).addEventListener('change', calcularAPGAR);
            });
            

            
            // Silverman
            ['silvermanIntercostal', 'silvermanXifoidea', 'silvermanSupraclavicular', 'silvermanAleteoNasal', 'silvermanQuejido'].forEach(id => {
                document.getElementById(id).addEventListener('change', calcularSilverman);
            });
            
            // NIPS (Dolor)
            ['nipsExpresion', 'nipsLlanto', 'nipsRespiracion', 'nipsBrazos', 'nipsPiernas', 'nipsAlerta'].forEach(id => {
                document.getElementById(id).addEventListener('change', calcularNIPS);
            });
            
            // Riesgo de Ca√≠das
            ['caidaEdadGestacional', 'caidaMovilidad', 'caidaDispositivos', 'caidaMedicamentos', 'caidaAmbiente', 'caidaSupervision'].forEach(id => {
                document.getElementById(id).addEventListener('change', calcularRiesgoCaidas);
            });
            
            // Braden (UPP)
            ['bradenMovilidad', 'bradenActividad', 'bradenPercepcion', 'bradenHumedad', 'bradenNutricion', 'bradenFriccion'].forEach(id => {
                document.getElementById(id).addEventListener('change', calcularBraden);
            });
            
            // Modo Ventilatorio
            document.getElementById('modoVentilatorio').addEventListener('change', configurarModoVentilatorio);
            
            // Par√°metros Ventilatorios
            ['fio2', 'peep', 'frecuenciaVentilatoria', 'pip', 'volumenTidal', 'presionSoporte', 'tiempoInspiratorio', 
             'presionMediaVia', 'amplitud', 'frecuenciaHFOV'].forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', calcularParametrosVentilatorios);
                }
            });
            
            // Event listeners para diagn√≥sticos autom√°ticos
            ['peso', 'temperatura', 'frecuenciaRespiratoria', 'saturacionO2', 'leucocitos', 'pcr', 'modoVentilatorio'].forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', generarDiagnosticosAutomaticos);
                    element.addEventListener('change', generarDiagnosticosAutomaticos);
                }
            });
            
            // Event listeners para gr√°ficas de percentiles
            ['peso', 'talla', 'perimetroCefalico', 'semanasGestacion', 'sexo'].forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', () => {
                        if (tipoGraficaActual) {
                            actualizarGrafica();
                        }
                    });
                    element.addEventListener('change', () => {
                        if (tipoGraficaActual) {
                            actualizarGrafica();
                        }
                    });
                }
            });
            
            // Inicializar gr√°fica de percentiles por defecto
            setTimeout(() => {
                mostrarGrafica('peso');
            }, 100);
            
            // Event listeners para checkboxes de diagn√≥sticos
            document.addEventListener('change', function(e) {
                if (e.target.name === 'diagnosticos[]') {
                    actualizarIntervencionesYResultados();
                }
            });
        });
        
        // Funci√≥n para exportar datos
        function exportarDatos() {
            const formData = new FormData(document.getElementById('clinicalDataForm'));
            const data = Object.fromEntries(formData);
            
            // Agregar datos calculados
            data.imc = document.getElementById('imcCalculado').textContent;
            data.indicePonderal = document.getElementById('indicePonderal').textContent;
            data.clasificacionPeso = document.getElementById('clasificacionPeso').textContent;
            data.clasificacionEG = document.getElementById('clasificacionEG').textContent;
            data.apgarTotal = document.getElementById('apgarTotal').textContent;
            data.silvermanTotal = document.getElementById('silvermanTotal').textContent;
            data.nipsTotal = document.getElementById('nipsTotal').textContent;
            data.riesgoBilirrubina = document.getElementById('riesgoBilirrubina').textContent;
            data.fechaExportacion = new Date().toLocaleString('es-ES');
            
            // Crear archivo JSON
            const jsonData = JSON.stringify(data, null, 2);
            const blob = new Blob([jsonData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            // Crear enlace de descarga
            const a = document.createElement('a');
            a.href = url;
            a.download = `neoclinic_datos_${data.expediente || 'paciente'}_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            // Mostrar confirmaci√≥n
            const confirmDiv = document.createElement('div');
            confirmDiv.className = 'fixed top-4 right-4 bg-green-600 text-white p-4 rounded-lg shadow-lg z-50';
            confirmDiv.innerHTML = '‚úÖ Datos exportados exitosamente';
            document.body.appendChild(confirmDiv);
            setTimeout(() => {
                document.body.removeChild(confirmDiv);
            }, 3000);
        }
        
        // Funci√≥n para limpiar formulario
        function clearForm() {
            document.getElementById('clinicalDataForm').reset();
            document.getElementById('imcCalculado').textContent = '-';
            document.getElementById('indicePonderal').textContent = '-';
            document.getElementById('clasificacionPeso').textContent = '-';
            document.getElementById('clasificacionEG').textContent = '-';
            document.getElementById('alertasSignosVitales').textContent = 'Sin alertas';
            document.getElementById('alertasLaboratorio').textContent = 'Sin alertas';
            document.getElementById('riesgoBilirrubina').textContent = '-';
            document.getElementById('recomendacionBilirrubina').textContent = 'Ingrese valores';
            document.getElementById('apgarTotal').textContent = '0';
            document.getElementById('apgarInterpretacion').textContent = 'Ingrese valores';

            document.getElementById('silvermanTotal').textContent = '0';
            document.getElementById('silvermanInterpretacion').textContent = 'Sin dificultad respiratoria';
            document.getElementById('nipsTotal').textContent = '0';
            document.getElementById('nipsInterpretacion').textContent = 'Sin dolor';
            document.getElementById('nipsRecomendaciones').textContent = 'Continuar vigilancia';
            document.getElementById('caidaTotal').textContent = '0';
            document.getElementById('caidaRiesgo').textContent = 'Bajo riesgo';
            document.getElementById('caidaMedidas').textContent = 'Medidas est√°ndar de seguridad';
            document.getElementById('bradenTotal').textContent = '23';
            document.getElementById('bradenRiesgo').textContent = 'Bajo riesgo';
            document.getElementById('bradenPlan').textContent = 'Cuidados est√°ndar de la piel';
            document.getElementById('relacionIE').textContent = '-';
            document.getElementById('volumenMinuto').textContent = '-';
            document.getElementById('indiceOxigenacion').textContent = '-';
            document.getElementById('alertasVentilatorias').textContent = 'Sin alertas';
            document.getElementById('infoModoVentilatorio').classList.add('hidden');
            
            // Limpiar canvas
            const canvas = document.getElementById('bilirubinChart');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            document.getElementById('resultsArea').classList.add('hidden');
        }
        
        // Base de datos de diagn√≥sticos NANDA, intervenciones NIC y resultados NOC
        const diagnosticosNANDA = {
            '00032': {
                nombre: 'Patr√≥n respiratorio ineficaz',
                definicion: 'Inspiraci√≥n y/o espiraci√≥n que no proporciona una ventilaci√≥n adecuada',
                factores: ['Dolor', 'Ansiedad', 'Posici√≥n corporal', 'Fatiga de m√∫sculos respiratorios'],
                intervenciones: ['3140', '3160', '3200', '3230'],
                resultados: ['0403', '0415', '0802']
            },
            '00030': {
                nombre: 'Deterioro del intercambio de gases',
                definicion: 'Exceso o d√©ficit en la oxigenaci√≥n y/o eliminaci√≥n del di√≥xido de carbono en la membrana alveolocapilar',
                factores: ['Desequilibrio ventilaci√≥n-perfusi√≥n', 'Cambios en la membrana alveolocapilar'],
                intervenciones: ['3140', '3320', '3350', '4232'],
                resultados: ['0402', '0403', '0415']
            },
            '00031': {
                nombre: 'Limpieza ineficaz de las v√≠as a√©reas',
                definicion: 'Incapacidad para eliminar las secreciones u obstrucciones del tracto respiratorio',
                factores: ['Secreciones retenidas', 'V√≠a a√©rea artificial', 'Infecci√≥n'],
                intervenciones: ['3160', '3230', '3250', '3300'],
                resultados: ['0410', '0415', '1918']
            },
            '00002': {
                nombre: 'Desequilibrio nutricional: inferior a las necesidades',
                definicion: 'Ingesta de nutrientes insuficiente para satisfacer las necesidades metab√≥licas',
                factores: ['Incapacidad para ingerir alimentos', 'Factores biol√≥gicos', 'Factores econ√≥micos'],
                intervenciones: ['1050', '1056', '1100', '1160'],
                resultados: ['1004', '1014', '1100']
            },
            '00107': {
                nombre: 'Patr√≥n de alimentaci√≥n ineficaz del lactante',
                definicion: 'Deterioro de la habilidad del lactante para succionar o coordinar la respuesta de succi√≥n-degluci√≥n',
                factores: ['Prematuridad', 'Hipersensibilidad oral', 'Retraso neurol√≥gico'],
                intervenciones: ['1052', '1054', '1056', '5244'],
                resultados: ['1005', '1020', '1842']
            },
            '00005': {
                nombre: 'Riesgo de desequilibrio de la temperatura corporal',
                definicion: 'Vulnerable a no mantener la temperatura corporal dentro del rango normal',
                factores: ['Edad extrema', 'Peso extremo', 'Exposici√≥n a temperaturas ambientales extremas'],
                intervenciones: ['3740', '3780', '3900', '6482'],
                resultados: ['0800', '0801', '0802']
            },
            '00046': {
                nombre: 'Deterioro de la integridad cut√°nea',
                definicion: 'Alteraci√≥n de la epidermis y/o dermis',
                factores: ['Presi√≥n sobre prominencias √≥seas', 'Inmovilizaci√≥n f√≠sica', 'Humedad'],
                intervenciones: ['3520', '3540', '3584', '6540'],
                resultados: ['1101', '1102', '1103']
            },
            '00132': {
                nombre: 'Dolor agudo',
                definicion: 'Experiencia sensitiva y emocional desagradable ocasionada por una lesi√≥n tisular real o potencial',
                factores: ['Agentes lesivos biol√≥gicos', 'Agentes lesivos qu√≠micos', 'Agentes lesivos f√≠sicos'],
                intervenciones: ['1400', '2210', '2380', '6040'],
                resultados: ['1605', '2101', '2102']
            },
            '00004': {
                nombre: 'Riesgo de infecci√≥n',
                definicion: 'Vulnerable a una invasi√≥n y multiplicaci√≥n de organismos pat√≥genos',
                factores: ['Procedimientos invasivos', 'Defensas primarias inadecuadas', 'Defensas secundarias inadecuadas'],
                intervenciones: ['6540', '6545', '6550', '6610'],
                resultados: ['0702', '1101', '1924']
            }
        };
        
        const intervencionesNIC = {
            '3140': 'Manejo de la v√≠a a√©rea',
            '3160': 'Aspiraci√≥n de las v√≠as a√©reas',
            '3200': 'Precauciones para evitar la aspiraci√≥n',
            '3230': 'Fisioterapia respiratoria',
            '3320': 'Oxigenoterapia',
            '3350': 'Monitorizaci√≥n respiratoria',
            '3740': 'Tratamiento de la fiebre',
            '3780': 'Tratamiento de la exposici√≥n al calor',
            '3900': 'Regulaci√≥n de la temperatura',
            '1050': 'Alimentaci√≥n',
            '1056': 'Alimentaci√≥n enteral por sonda',
            '1100': 'Manejo de la nutrici√≥n',
            '1052': 'Alimentaci√≥n con biber√≥n',
            '1054': 'Ayuda con la lactancia materna',
            '3520': 'Cuidados de las √∫lceras por presi√≥n',
            '3540': 'Prevenci√≥n de √∫lceras por presi√≥n',
            '1400': 'Manejo del dolor',
            '2210': 'Administraci√≥n de analg√©sicos',
            '6540': 'Control de infecciones',
            '6545': 'Control de infecciones: intraoperatorio',
            '6550': 'Protecci√≥n contra las infecciones'
        };
        
        const resultadosNOC = {
            '0403': 'Estado respiratorio: ventilaci√≥n',
            '0415': 'Estado respiratorio: intercambio gaseoso',
            '0802': 'Signos vitales',
            '0402': 'Estado respiratorio: permeabilidad de las v√≠as respiratorias',
            '1004': 'Estado nutricional',
            '1014': 'Apetito',
            '1100': 'Higiene bucal',
            '1005': 'Estado nutricional: determinaciones bioqu√≠micas',
            '0800': 'Termorregulaci√≥n',
            '0801': 'Termorregulaci√≥n del reci√©n nacido',
            '1101': 'Integridad tisular: piel y membranas mucosas',
            '1102': 'Curaci√≥n de la herida: por primera intenci√≥n',
            '1605': 'Control del dolor',
            '2101': 'Dolor: efectos nocivos',
            '0702': 'Estado inmune'
        };
        
        // Funci√≥n para generar diagn√≥sticos autom√°ticos basados en datos cl√≠nicos
        function generarDiagnosticosAutomaticos() {
            const diagnosticosSugeridos = [];
            
            // Evaluar patr√≥n respiratorio
            const silvermanScore = parseInt(document.getElementById('silvermanTotal').textContent) || 0;
            const fr = parseFloat(document.getElementById('frecuenciaRespiratoria').value);
            const sat = parseFloat(document.getElementById('saturacionO2').value);
            const modoVent = document.getElementById('modoVentilatorio').value;
            
            if (silvermanScore > 3 || (fr && (fr < 30 || fr > 60)) || (sat && sat < 90) || modoVent) {
                diagnosticosSugeridos.push({
                    codigo: '00032',
                    prioridad: 'alta',
                    justificacion: `Silverman: ${silvermanScore}, FR: ${fr || 'N/A'}, SatO2: ${sat || 'N/A'}%`
                });
            }
            
            if ((sat && sat < 90) || modoVent) {
                diagnosticosSugeridos.push({
                    codigo: '00030',
                    prioridad: 'alta',
                    justificacion: `SatO2: ${sat || 'N/A'}%, Soporte ventilatorio requerido`
                });
            }
            
            // Evaluar nutrici√≥n
            const peso = parseFloat(document.getElementById('peso').value);
            const clasificacionPeso = document.getElementById('clasificacionPeso').textContent;
            
            if (peso && peso < 2500 || clasificacionPeso.includes('bajo peso')) {
                diagnosticosSugeridos.push({
                    codigo: '00002',
                    prioridad: 'media',
                    justificacion: `Peso: ${peso}g, Clasificaci√≥n: ${clasificacionPeso}`
                });
            }
            
            // Evaluar termorregulaci√≥n
            const temp = parseFloat(document.getElementById('temperatura').value);
            const semanasGest = parseInt(document.getElementById('semanasGestacion').value);
            
            if ((temp && (temp < 36.0 || temp > 37.5)) || (semanasGest && semanasGest < 37)) {
                diagnosticosSugeridos.push({
                    codigo: '00005',
                    prioridad: 'media',
                    justificacion: `Temperatura: ${temp || 'N/A'}¬∞C, EG: ${semanasGest || 'N/A'} semanas`
                });
            }
            
            // Evaluar dolor
            const nipsScore = parseInt(document.getElementById('nipsTotal').textContent) || 0;
            
            if (nipsScore > 2) {
                diagnosticosSugeridos.push({
                    codigo: '00132',
                    prioridad: nipsScore > 4 ? 'alta' : 'media',
                    justificacion: `NIPS: ${nipsScore}/7 - ${document.getElementById('nipsInterpretacion').textContent}`
                });
            }
            
            // Evaluar riesgo de infecci√≥n
            const leucocitos = parseFloat(document.getElementById('leucocitos').value);
            const pcr = parseFloat(document.getElementById('pcr').value);
            
            if ((leucocitos && (leucocitos < 5000 || leucocitos > 20000)) || (pcr && pcr > 10)) {
                diagnosticosSugeridos.push({
                    codigo: '00004',
                    prioridad: 'alta',
                    justificacion: `Leucocitos: ${leucocitos || 'N/A'}/ŒºL, PCR: ${pcr || 'N/A'} mg/L`
                });
            }
            
            // Evaluar integridad cut√°nea
            const bradenScore = parseInt(document.getElementById('bradenTotal').textContent) || 23;
            
            if (bradenScore <= 16) {
                diagnosticosSugeridos.push({
                    codigo: '00046',
                    prioridad: 'media',
                    justificacion: `Braden: ${bradenScore} - ${document.getElementById('bradenRiesgo').textContent}`
                });
            }
            
            mostrarDiagnosticosSugeridos(diagnosticosSugeridos);
        }
        
        // Funci√≥n para mostrar diagn√≥sticos sugeridos
        function mostrarDiagnosticosSugeridos(diagnosticos) {
            const container = document.getElementById('diagnosticosSugeridos');
            
            if (diagnosticos.length === 0) {
                container.innerHTML = `
                    <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                        <p class="text-green-700 text-sm">‚úÖ No se identificaron diagn√≥sticos de enfermer√≠a prioritarios basados en los datos actuales</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            diagnosticos.forEach(diag => {
                const info = diagnosticosNANDA[diag.codigo];
                const prioridadColor = diag.prioridad === 'alta' ? 'red' : diag.prioridad === 'media' ? 'yellow' : 'blue';
                
                html += `
                    <div class="bg-${prioridadColor}-50 p-4 rounded-lg border border-${prioridadColor}-200">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <div class="flex items-center mb-2">
                                    <span class="bg-${prioridadColor}-600 text-white px-2 py-1 rounded text-xs font-bold mr-2">
                                        ${diag.prioridad.toUpperCase()}
                                    </span>
                                    <h5 class="font-bold text-${prioridadColor}-800">${diag.codigo} - ${info.nombre}</h5>
                                </div>
                                <p class="text-${prioridadColor}-700 text-sm mb-2">${info.definicion}</p>
                                <p class="text-${prioridadColor}-600 text-xs"><strong>Justificaci√≥n:</strong> ${diag.justificacion}</p>
                            </div>
                            <button type="button" onclick="agregarDiagnosticoAutomatico('${diag.codigo}')" 
                                    class="bg-${prioridadColor}-600 text-white px-3 py-1 rounded text-xs hover:bg-${prioridadColor}-700 transition-all">
                                ‚ûï Agregar
                            </button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        // Funci√≥n para agregar diagn√≥stico autom√°tico
        function agregarDiagnosticoAutomatico(codigo) {
            const checkbox = document.querySelector(`input[value="${codigo}"]`);
            if (checkbox) {
                checkbox.checked = true;
                actualizarIntervencionesYResultados();
            }
        }
        
        // Funci√≥n para actualizar intervenciones y resultados seg√∫n diagn√≥sticos seleccionados
        function actualizarIntervencionesYResultados() {
            const diagnosticosSeleccionados = Array.from(document.querySelectorAll('input[name="diagnosticos[]"]:checked'))
                .map(cb => cb.value);
            
            // Actualizar intervenciones
            const intervencionesContainer = document.getElementById('intervencionesContainer');
            const resultadosContainer = document.getElementById('resultadosContainer');
            
            if (diagnosticosSeleccionados.length === 0) {
                intervencionesContainer.innerHTML = `
                    <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                        <p class="text-blue-700 text-sm">Seleccione diagn√≥sticos para ver las intervenciones recomendadas</p>
                    </div>
                `;
                resultadosContainer.innerHTML = `
                    <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                        <p class="text-blue-700 text-sm">Seleccione diagn√≥sticos para ver los resultados esperados</p>
                    </div>
                `;
                return;
            }
            
            // Generar intervenciones
            let intervencionesHtml = '';
            let resultadosHtml = '';
            let todasIntervenciones = new Set();
            let todosResultados = new Set();
            
            diagnosticosSeleccionados.forEach(codigo => {
                const info = diagnosticosNANDA[codigo];
                if (info) {
                    info.intervenciones.forEach(intCode => todasIntervenciones.add(intCode));
                    info.resultados.forEach(resCode => todosResultados.add(resCode));
                    
                    intervencionesHtml += `
                        <div class="bg-white p-4 rounded-lg border border-emerald-300">
                            <h5 class="font-bold text-emerald-700 mb-2">${codigo} - ${info.nombre}</h5>
                            <div class="space-y-2">
                                ${info.intervenciones.map(intCode => `
                                    <div class="flex items-center">
                                        <input type="checkbox" name="intervenciones[]" value="${intCode}" class="mr-2 text-emerald-600" checked>
                                        <span class="text-sm">${intCode} - ${intervencionesNIC[intCode] || 'Intervenci√≥n no definida'}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                    
                    resultadosHtml += `
                        <div class="bg-white p-4 rounded-lg border border-emerald-300">
                            <h5 class="font-bold text-emerald-700 mb-2">${codigo} - ${info.nombre}</h5>
                            <div class="space-y-2">
                                ${info.resultados.map(resCode => `
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm">${resCode} - ${resultadosNOC[resCode] || 'Resultado no definido'}</span>
                                        <select name="resultado_${resCode}" class="text-xs border border-emerald-300 rounded px-2 py-1">
                                            <option value="">Meta</option>
                                            <option value="1">1 - Gravemente comprometido</option>
                                            <option value="2">2 - Sustancialmente comprometido</option>
                                            <option value="3">3 - Moderadamente comprometido</option>
                                            <option value="4">4 - Levemente comprometido</option>
                                            <option value="5">5 - No comprometido</option>
                                        </select>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                }
            });
            
            intervencionesContainer.innerHTML = intervencionesHtml;
            resultadosContainer.innerHTML = resultadosHtml;
        }
        
        // Funci√≥n para agregar intervenci√≥n personalizada
        function agregarIntervencionPersonalizada() {
            const container = document.getElementById('intervencionesContainer');
            const nuevaIntervencion = document.createElement('div');
            nuevaIntervencion.className = 'bg-yellow-50 p-4 rounded-lg border border-yellow-300';
            nuevaIntervencion.innerHTML = `
                <div class="flex items-start justify-between">
                    <div class="flex-1">
                        <h5 class="font-bold text-yellow-700 mb-2">Intervenci√≥n Personalizada</h5>
                        <textarea name="intervencion_personalizada[]" rows="3" 
                                  class="w-full p-2 border border-yellow-300 rounded text-sm" 
                                  placeholder="Describa la intervenci√≥n personalizada..."></textarea>
                    </div>
                    <button type="button" onclick="this.parentElement.parentElement.remove()" 
                            class="bg-red-500 text-white px-2 py-1 rounded text-xs ml-2">
                        ‚úï
                    </button>
                </div>
            `;
            container.appendChild(nuevaIntervencion);
        }
        
        // Variables globales para gr√°ficas de percentiles
        let tipoGraficaActual = 'peso';
        let medicionesPaciente = [];
        
        // Datos de percentiles Fenton (simplificados para demostraci√≥n)
        const percentilesData = {
            peso: {
                masculino: {
                    24: [500, 550, 600, 680, 760, 840, 920],
                    26: [650, 720, 790, 890, 990, 1090, 1190],
                    28: [800, 890, 980, 1100, 1220, 1340, 1460],
                    30: [1000, 1110, 1220, 1370, 1520, 1670, 1820],
                    32: [1250, 1380, 1510, 1690, 1870, 2050, 2230],
                    34: [1550, 1700, 1850, 2060, 2270, 2480, 2690],
                    36: [1900, 2070, 2240, 2480, 2720, 2960, 3200],
                    38: [2300, 2490, 2680, 2950, 3220, 3490, 3760],
                    40: [2750, 2960, 3170, 3470, 3770, 4070, 4370]
                },
                femenino: {
                    24: [480, 530, 580, 650, 720, 790, 860],
                    26: [620, 690, 760, 850, 940, 1030, 1120],
                    28: [770, 850, 930, 1040, 1150, 1260, 1370],
                    30: [950, 1050, 1150, 1280, 1410, 1540, 1670],
                    32: [1180, 1300, 1420, 1580, 1740, 1900, 2060],
                    34: [1450, 1590, 1730, 1920, 2110, 2300, 2490],
                    36: [1770, 1930, 2090, 2310, 2530, 2750, 2970],
                    38: [2130, 2310, 2490, 2740, 2990, 3240, 3490],
                    40: [2540, 2740, 2940, 3220, 3500, 3780, 4060]
                }
            },
            talla: {
                masculino: {
                    24: [30.0, 31.0, 32.0, 33.5, 35.0, 36.5, 38.0],
                    26: [32.0, 33.0, 34.0, 35.5, 37.0, 38.5, 40.0],
                    28: [34.0, 35.0, 36.0, 37.5, 39.0, 40.5, 42.0],
                    30: [36.0, 37.0, 38.0, 39.5, 41.0, 42.5, 44.0],
                    32: [38.0, 39.0, 40.0, 41.5, 43.0, 44.5, 46.0],
                    34: [40.0, 41.0, 42.0, 43.5, 45.0, 46.5, 48.0],
                    36: [42.0, 43.0, 44.0, 45.5, 47.0, 48.5, 50.0],
                    38: [44.0, 45.0, 46.0, 47.5, 49.0, 50.5, 52.0],
                    40: [46.0, 47.0, 48.0, 49.5, 51.0, 52.5, 54.0]
                },
                femenino: {
                    24: [29.5, 30.5, 31.5, 33.0, 34.5, 36.0, 37.5],
                    26: [31.5, 32.5, 33.5, 35.0, 36.5, 38.0, 39.5],
                    28: [33.5, 34.5, 35.5, 37.0, 38.5, 40.0, 41.5],
                    30: [35.5, 36.5, 37.5, 39.0, 40.5, 42.0, 43.5],
                    32: [37.5, 38.5, 39.5, 41.0, 42.5, 44.0, 45.5],
                    34: [39.5, 40.5, 41.5, 43.0, 44.5, 46.0, 47.5],
                    36: [41.5, 42.5, 43.5, 45.0, 46.5, 48.0, 49.5],
                    38: [43.5, 44.5, 45.5, 47.0, 48.5, 50.0, 51.5],
                    40: [45.5, 46.5, 47.5, 49.0, 50.5, 52.0, 53.5]
                }
            },
            pc: {
                masculino: {
                    24: [20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0],
                    26: [21.5, 22.5, 23.5, 24.5, 25.5, 26.5, 27.5],
                    28: [23.0, 24.0, 25.0, 26.0, 27.0, 28.0, 29.0],
                    30: [24.5, 25.5, 26.5, 27.5, 28.5, 29.5, 30.5],
                    32: [26.0, 27.0, 28.0, 29.0, 30.0, 31.0, 32.0],
                    34: [27.5, 28.5, 29.5, 30.5, 31.5, 32.5, 33.5],
                    36: [29.0, 30.0, 31.0, 32.0, 33.0, 34.0, 35.0],
                    38: [30.5, 31.5, 32.5, 33.5, 34.5, 35.5, 36.5],
                    40: [32.0, 33.0, 34.0, 35.0, 36.0, 37.0, 38.0]
                },
                femenino: {
                    24: [19.5, 20.5, 21.5, 22.5, 23.5, 24.5, 25.5],
                    26: [21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 27.0],
                    28: [22.5, 23.5, 24.5, 25.5, 26.5, 27.5, 28.5],
                    30: [24.0, 25.0, 26.0, 27.0, 28.0, 29.0, 30.0],
                    32: [25.5, 26.5, 27.5, 28.5, 29.5, 30.5, 31.5],
                    34: [27.0, 28.0, 29.0, 30.0, 31.0, 32.0, 33.0],
                    36: [28.5, 29.5, 30.5, 31.5, 32.5, 33.5, 34.5],
                    38: [30.0, 31.0, 32.0, 33.0, 34.0, 35.0, 36.0],
                    40: [31.5, 32.5, 33.5, 34.5, 35.5, 36.5, 37.5]
                }
            }
        };
        
        // Funci√≥n para mostrar gr√°fica de percentiles
        function mostrarGrafica(tipo) {
            tipoGraficaActual = tipo;
            
            // Actualizar botones con dise√±o simple
            document.querySelectorAll('.grafica-btn').forEach(btn => {
                btn.className = 'grafica-btn bg-gray-300 text-gray-700 px-4 py-3 rounded-lg font-medium hover:bg-gray-400 transition-all';
            });
            
            const btnActivo = document.getElementById(`btn${tipo.charAt(0).toUpperCase() + tipo.slice(1)}`);
            if (btnActivo) {
                btnActivo.className = 'grafica-btn bg-blue-600 text-white px-4 py-3 rounded-lg font-medium hover:bg-blue-700 transition-all';
            }
            
            // Actualizar t√≠tulo
            const titulos = {
                peso: 'Peso por Edad Gestacional - Percentiles Fenton',
                talla: 'Talla por Edad Gestacional - Percentiles Fenton',
                pc: 'Per√≠metro Cef√°lico por Edad Gestacional - Percentiles Fenton'
            };
            
            document.getElementById('tituloGrafica').textContent = titulos[tipo];
            
            // Actualizar gr√°fica y tabla
            actualizarGrafica();
            actualizarTablaPercentiles();
        }
        
        // Funci√≥n para actualizar gr√°fica
        function actualizarGrafica() {
            const canvas = document.getElementById('percentileChart');
            const ctx = canvas.getContext('2d');
            const sexo = document.getElementById('sexoGrafica').value;
            
            // Limpiar canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Configuraci√≥n
            const padding = 60;
            const width = canvas.width - 2 * padding;
            const height = canvas.height - 2 * padding;
            
            const edadesGestacionales = [24, 26, 28, 30, 32, 34, 36, 38, 40];
            const percentiles = ['P3', 'P10', 'P25', 'P50', 'P75', 'P90', 'P97'];
            const coloresPercentiles = ['#dc2626', '#f97316', '#eab308', '#22c55e', '#eab308', '#f97316', '#dc2626'];
            
            // Obtener datos
            const data = percentilesData[tipoGraficaActual][sexo];
            
            // Calcular rangos
            let minValor = Infinity;
            let maxValor = -Infinity;
            
            edadesGestacionales.forEach(eg => {
                if (data[eg]) {
                    data[eg].forEach(val => {
                        minValor = Math.min(minValor, val);
                        maxValor = Math.max(maxValor, val);
                    });
                }
            });
            
            // Agregar margen
            const rango = maxValor - minValor;
            minValor -= rango * 0.1;
            maxValor += rango * 0.1;
            
            // Dibujar ejes
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, padding + height);
            ctx.lineTo(padding + width, padding + height);
            ctx.stroke();
            
            // Etiquetas de ejes
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Edad Gestacional (semanas)', padding + width/2, canvas.height - 20);
            
            ctx.save();
            ctx.translate(20, padding + height/2);
            ctx.rotate(-Math.PI/2);
            const unidades = {
                peso: 'Peso (gramos)',
                talla: 'Talla (cm)',
                pc: 'Per√≠metro Cef√°lico (cm)'
            };
            ctx.fillText(unidades[tipoGraficaActual], 0, 0);
            ctx.restore();
            
            // Dibujar l√≠neas de percentiles
            percentiles.forEach((percentil, pIndex) => {
                ctx.strokeStyle = coloresPercentiles[pIndex];
                ctx.lineWidth = pIndex === 3 ? 3 : 2; // P50 m√°s grueso
                ctx.setLineDash(pIndex === 0 || pIndex === 6 ? [5, 5] : []); // P3 y P97 punteadas
                
                ctx.beginPath();
                let primerPunto = true;
                
                edadesGestacionales.forEach(eg => {
                    if (data[eg]) {
                        const x = padding + ((eg - 24) / (40 - 24)) * width;
                        const y = padding + height - ((data[eg][pIndex] - minValor) / (maxValor - minValor)) * height;
                        
                        if (primerPunto) {
                            ctx.moveTo(x, y);
                            primerPunto = false;
                        } else {
                            ctx.lineTo(x, y);
                        }
                    }
                });
                
                ctx.stroke();
                ctx.setLineDash([]);
            });
            
            // Dibujar punto del paciente
            const pesoActual = parseFloat(document.getElementById('peso').value);
            const tallaActual = parseFloat(document.getElementById('talla').value);
            const pcActual = parseFloat(document.getElementById('perimetroCefalico').value);
            const egActual = parseInt(document.getElementById('semanasGestacion').value);
            
            let valorPaciente;
            switch (tipoGraficaActual) {
                case 'peso':
                    valorPaciente = pesoActual;
                    break;
                case 'talla':
                    valorPaciente = tallaActual;
                    break;
                case 'pc':
                    valorPaciente = pcActual;
                    break;
            }
            
            if (valorPaciente && egActual && egActual >= 24 && egActual <= 40) {
                const x = padding + ((egActual - 24) / (40 - 24)) * width;
                const y = padding + height - ((valorPaciente - minValor) / (maxValor - minValor)) * height;
                
                // Punto del paciente
                ctx.fillStyle = '#dc2626';
                ctx.beginPath();
                ctx.arc(x, y, 8, 0, 2 * Math.PI);
                ctx.fill();
                
                // Etiqueta
                ctx.fillStyle = '#000';
                ctx.font = 'bold 12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(`${valorPaciente}`, x, y - 15);
                
                // Calcular percentil
                const percentilCalculado = calcularPercentil(egActual, valorPaciente, tipoGraficaActual, sexo);
                actualizarInfoPaciente(valorPaciente, percentilCalculado);
            } else {
                document.getElementById('valorPaciente').textContent = '-';
                document.getElementById('percentilPaciente').textContent = '-';
                document.getElementById('clasificacionPercentil').textContent = '-';
            }
            
            // Marcas en los ejes
            ctx.fillStyle = '#666';
            ctx.font = '10px Arial';
            ctx.textAlign = 'center';
            
            // Eje X (edad gestacional)
            edadesGestacionales.forEach(eg => {
                const x = padding + ((eg - 24) / (40 - 24)) * width;
                ctx.fillText(eg.toString(), x, canvas.height - 5);
                
                // L√≠neas de cuadr√≠cula
                ctx.strokeStyle = '#e5e5e5';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(x, padding);
                ctx.lineTo(x, padding + height);
                ctx.stroke();
            });
            
            // Eje Y (valores)
            const numMarcas = 8;
            for (let i = 0; i <= numMarcas; i++) {
                const valor = minValor + (maxValor - minValor) * (i / numMarcas);
                const y = padding + height - (i / numMarcas) * height;
                
                ctx.textAlign = 'right';
                ctx.fillText(Math.round(valor).toString(), padding - 10, y + 3);
                
                // L√≠neas de cuadr√≠cula
                ctx.strokeStyle = '#e5e5e5';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(padding + width, y);
                ctx.stroke();
            });
            
            // Leyenda
            ctx.fillStyle = '#333';
            ctx.font = '10px Arial';
            percentiles.forEach((percentil, index) => {
                const x = padding + width + 10;
                const y = padding + 20 + (index * 15);
                
                ctx.fillStyle = coloresPercentiles[index];
                ctx.fillRect(x, y - 5, 15, 3);
                
                ctx.fillStyle = '#333';
                ctx.textAlign = 'left';
                ctx.fillText(percentil, x + 20, y);
            });
        }
        
        // Funci√≥n para calcular percentil
        function calcularPercentil(edadGestacional, valor, tipo, sexo) {
            // Buscar la edad gestacional m√°s cercana
            const edadesDisponibles = Object.keys(percentilesData[tipo][sexo]).map(Number).sort((a, b) => a - b);
            let egCercana = edadesDisponibles.reduce((prev, curr) => 
                Math.abs(curr - edadGestacional) < Math.abs(prev - edadGestacional) ? curr : prev
            );
            
            const valores = percentilesData[tipo][sexo][egCercana];
            if (!valores) return null;
            
            // Encontrar entre qu√© percentiles est√° el valor
            if (valor < valores[0]) return '<P3';
            if (valor > valores[6]) return '>P97';
            
            for (let i = 0; i < valores.length - 1; i++) {
                if (valor >= valores[i] && valor <= valores[i + 1]) {
                    const percentiles = [3, 10, 25, 50, 75, 90, 97];
                    return `P${percentiles[i]}-P${percentiles[i + 1]}`;
                }
            }
            
            return 'P50'; // Valor por defecto
        }
        
        // Funci√≥n para actualizar informaci√≥n del paciente
        function actualizarInfoPaciente(valor, percentil) {
            const unidades = {
                peso: 'g',
                talla: 'cm',
                pc: 'cm'
            };
            
            document.getElementById('valorPaciente').textContent = `${valor} ${unidades[tipoGraficaActual]}`;
            document.getElementById('percentilPaciente').textContent = percentil || '-';
            
            // Clasificaci√≥n
            let clasificacion = '';
            let color = 'text-purple-600';
            
            if (percentil) {
                if (percentil.includes('<P3')) {
                    clasificacion = 'PEG (Peque√±o para EG)';
                    color = 'text-red-600';
                } else if (percentil.includes('P3') || percentil.includes('P10')) {
                    clasificacion = 'Bajo peso - Vigilancia';
                    color = 'text-orange-600';
                } else if (percentil.includes('>P97')) {
                    clasificacion = 'GEG (Grande para EG)';
                    color = 'text-red-600';
                } else if (percentil.includes('P90') || percentil.includes('P97')) {
                    clasificacion = 'Alto peso - Vigilancia';
                    color = 'text-orange-600';
                } else {
                    clasificacion = 'AEG (Adecuado para EG)';
                    color = 'text-green-600';
                }
            }
            
            document.getElementById('clasificacionPercentil').textContent = clasificacion;
            document.getElementById('clasificacionPercentil').className = `font-bold text-lg ${color}`;
            
            // Generar recomendaciones
            generarRecomendacionesPercentil(clasificacion);
        }
        
        // Funci√≥n para generar recomendaciones seg√∫n percentil
        function generarRecomendacionesPercentil(clasificacion) {
            let recomendaciones = '';
            
            switch (clasificacion) {
                case 'PEG (Peque√±o para EG)':
                    recomendaciones = `
                        <div class="text-red-700">
                            <strong>‚ö†Ô∏è ATENCI√ìN PRIORITARIA:</strong><br>
                            ‚Ä¢ Monitoreo estrecho de glucemia (riesgo de hipoglucemia)<br>
                            ‚Ä¢ Control t√©rmico riguroso (riesgo de hipotermia)<br>
                            ‚Ä¢ Vigilancia de policitemia y hematocrito<br>
                            ‚Ä¢ Evaluaci√≥n nutricional especializada<br>
                            ‚Ä¢ Seguimiento neurol√≥gico a largo plazo
                        </div>
                    `;
                    break;
                case 'GEG (Grande para EG)':
                    recomendaciones = `
                        <div class="text-red-700">
                            <strong>‚ö†Ô∏è VIGILANCIA ESPECIAL:</strong><br>
                            ‚Ä¢ Monitoreo de glucemia (riesgo de hipoglucemia reactiva)<br>
                            ‚Ä¢ Evaluaci√≥n de trauma obst√©trico<br>
                            ‚Ä¢ Descartar diabetes materna<br>
                            ‚Ä¢ Vigilancia de s√≠ndrome de dificultad respiratoria<br>
                            ‚Ä¢ Control de peso seriado
                        </div>
                    `;
                    break;
                case 'Bajo peso - Vigilancia':
                case 'Alto peso - Vigilancia':
                    recomendaciones = `
                        <div class="text-orange-700">
                            <strong>üìä SEGUIMIENTO ESTRECHO:</strong><br>
                            ‚Ä¢ Mediciones antropom√©tricas seriadas<br>
                            ‚Ä¢ Evaluaci√≥n nutricional peri√≥dica<br>
                            ‚Ä¢ Monitoreo de velocidad de crecimiento<br>
                            ‚Ä¢ Vigilancia de signos de alarma<br>
                            ‚Ä¢ Reevaluaci√≥n en 1-2 semanas
                        </div>
                    `;
                    break;
                case 'AEG (Adecuado para EG)':
                    recomendaciones = `
                        <div class="text-green-700">
                            <strong>‚úÖ CRECIMIENTO ADECUADO:</strong><br>
                            ‚Ä¢ Continuar cuidados de rutina<br>
                            ‚Ä¢ Mediciones antropom√©tricas seg√∫n protocolo<br>
                            ‚Ä¢ Mantener aporte nutricional actual<br>
                            ‚Ä¢ Seguimiento est√°ndar de crecimiento<br>
                            ‚Ä¢ Pr√≥xima evaluaci√≥n seg√∫n cronograma
                        </div>
                    `;
                    break;
                default:
                    recomendaciones = 'Ingrese los datos antropom√©tricos para obtener recomendaciones personalizadas';
            }
            
            document.getElementById('recomendacionesPercentil').innerHTML = recomendaciones;
        }
        
        // Funci√≥n para actualizar tabla de percentiles
        function actualizarTablaPercentiles() {
            const sexo = document.getElementById('sexoGrafica').value;
            const data = percentilesData[tipoGraficaActual][sexo];
            const tbody = document.getElementById('cuerpoTablaPercentiles');
            
            let html = '';
            const edadesGestacionales = [24, 26, 28, 30, 32, 34, 36, 38, 40];
            
            edadesGestacionales.forEach(eg => {
                if (data[eg]) {
                    html += `
                        <tr class="hover:bg-purple-50">
                            <td class="border border-purple-300 px-3 py-2 font-medium">${eg} semanas</td>
                            ${data[eg].map(valor => `<td class="border border-purple-300 px-3 py-2 text-center">${valor}</td>`).join('')}
                        </tr>
                    `;
                }
            });
            
            tbody.innerHTML = html;
        }
        
        // Funci√≥n para agregar medici√≥n de crecimiento
        function agregarMedicion() {
            const fecha = document.getElementById('fechaMedicion').value;
            const peso = parseFloat(document.getElementById('pesoMedicion').value);
            const talla = parseFloat(document.getElementById('tallaMedicion').value);
            
            if (!fecha || !peso || !talla) {
                alert('Por favor complete todos los campos');
                return;
            }
            
            const nuevaMedicion = {
                fecha: fecha,
                peso: peso,
                talla: talla,
                id: Date.now()
            };
            
            medicionesPaciente.push(nuevaMedicion);
            medicionesPaciente.sort((a, b) => new Date(a.fecha) - new Date(b.fecha));
            
            actualizarTablaMediciones();
            
            // Limpiar campos
            document.getElementById('fechaMedicion').value = '';
            document.getElementById('pesoMedicion').value = '';
            document.getElementById('tallaMedicion').value = '';
        }
        
        // Funci√≥n para actualizar tabla de mediciones
        function actualizarTablaMediciones() {
            const tbody = document.getElementById('cuerpoTablaMediciones');
            
            if (medicionesPaciente.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" class="border border-purple-300 px-3 py-4 text-center text-purple-600">
                            No hay mediciones registradas
                        </td>
                    </tr>
                `;
                return;
            }
            
            let html = '';
            medicionesPaciente.forEach((medicion, index) => {
                let velocidadPeso = '-';
                let velocidadTalla = '-';
                
                if (index > 0) {
                    const medicionAnterior = medicionesPaciente[index - 1];
                    const diasDiferencia = (new Date(medicion.fecha) - new Date(medicionAnterior.fecha)) / (1000 * 60 * 60 * 24);
                    
                    if (diasDiferencia > 0) {
                        const difPeso = medicion.peso - medicionAnterior.peso;
                        const difTalla = medicion.talla - medicionAnterior.talla;
                        
                        velocidadPeso = `${(difPeso / diasDiferencia).toFixed(1)} g/d√≠a`;
                        velocidadTalla = `${((difTalla / diasDiferencia) * 7).toFixed(2)} cm/sem`;
                    }
                }
                
                html += `
                    <tr class="hover:bg-purple-50">
                        <td class="border border-purple-300 px-3 py-2">${new Date(medicion.fecha).toLocaleDateString('es-ES')}</td>
                        <td class="border border-purple-300 px-3 py-2 text-center">${medicion.peso}</td>
                        <td class="border border-purple-300 px-3 py-2 text-center">${medicion.talla}</td>
                        <td class="border border-purple-300 px-3 py-2 text-center">${velocidadPeso}</td>
                        <td class="border border-purple-300 px-3 py-2 text-center">${velocidadTalla}</td>
                        <td class="border border-purple-300 px-3 py-2 text-center">
                            <button onclick="eliminarMedicion(${medicion.id})" class="bg-red-500 text-white px-2 py-1 rounded text-xs hover:bg-red-600">
                                üóëÔ∏è
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            tbody.innerHTML = html;
        }
        
        // Funci√≥n para eliminar medici√≥n
        function eliminarMedicion(id) {
            medicionesPaciente = medicionesPaciente.filter(m => m.id !== id);
            actualizarTablaMediciones();
        }
        
        // Funciones adicionales para el reporte
        function imprimirReporte() {
            window.print();
        }
        
        function exportarReporte() {
            const reporteContent = document.getElementById('resultsArea').innerHTML;
            const blob = new Blob([`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Reporte NeoClinic</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        .header { text-align: center; margin-bottom: 30px; }
                        .section { margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>REPORTE CL√çNICO NEOCLINIC</h1>
                        <p>Generado: ${new Date().toLocaleString('es-ES')}</p>
                    </div>
                    ${reporteContent}
                </body>
                </html>
            `], { type: 'text/html' });
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `reporte_neoclinic_${new Date().toISOString().split('T')[0]}.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
        function compartirReporte() {
            if (navigator.share) {
                navigator.share({
                    title: 'Reporte Cl√≠nico NeoClinic',
                    text: 'Reporte cl√≠nico generado por el sistema NeoClinic',
                    url: window.location.href
                });
            } else {
                // Fallback: copiar al portapapeles
                const reportText = document.getElementById('clinicalSummary').textContent;
                navigator.clipboard.writeText(reportText).then(() => {
                    alert('Reporte copiado al portapapeles');
                });
            }
        }
        
        // Funci√≥n para generar resumen de diagn√≥sticos en el reporte
        function generarResumenDiagnosticos() {
            const diagnosticosSeleccionados = Array.from(document.querySelectorAll('input[name="diagnosticos[]"]:checked'))
                .map(cb => cb.value);
            
            const intervencionesSeleccionadas = Array.from(document.querySelectorAll('input[name="intervenciones[]"]:checked'))
                .map(cb => cb.value);
                
            const planCuidados = document.getElementById('planCuidados').value;
            
            if (diagnosticosSeleccionados.length === 0 && !planCuidados) {
                return '<div><strong>Diagn√≥sticos:</strong> No se han seleccionado diagn√≥sticos espec√≠ficos</div>';
            }
            
            let resumen = '';
            
            if (diagnosticosSeleccionados.length > 0) {
                resumen += '<div><strong>Diagn√≥sticos NANDA:</strong></div>';
                diagnosticosSeleccionados.forEach(codigo => {
                    const info = diagnosticosNANDA[codigo];
                    if (info) {
                        resumen += `<div class="ml-2">‚Ä¢ ${codigo} - ${info.nombre}</div>`;
                    }
                });
            }
            
            if (intervencionesSeleccionadas.length > 0) {
                resumen += '<div class="mt-2"><strong>Intervenciones NIC:</strong></div>';
                intervencionesSeleccionadas.forEach(codigo => {
                    const nombre = intervencionesNIC[codigo];
                    if (nombre) {
                        resumen += `<div class="ml-2">‚Ä¢ ${codigo} - ${nombre}</div>`;
                    }
                });
            }
            
            if (planCuidados) {
                resumen += `<div class="mt-2"><strong>Plan Personalizado:</strong></div>`;
                resumen += `<div class="ml-2 text-xs bg-gray-50 p-2 rounded">${planCuidados}</div>`;
            }
            
            return resumen || '<div>No hay informaci√≥n de diagn√≥sticos disponible</div>';
        }
        
        // Funci√≥n para generar reporte mejorado
        document.getElementById('clinicalDataForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Recopilar datos del formulario
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            // Actualizar fecha del reporte
            document.getElementById('fechaReporte').textContent = `Generado: ${new Date().toLocaleString('es-ES')}`;
            
            // Generar resumen ejecutivo
            const apgarScore = document.getElementById('apgarTotal').textContent;
            const silvermanScore = document.getElementById('silvermanTotal').textContent;
            const peso = data.peso || 'No especificado';
            const edadGest = document.getElementById('clasificacionEG').textContent;
            
            let resumenEjecutivo = `Neonato de ${edadGest}, peso ${peso}g. `;
            if (parseInt(apgarScore) >= 7) {
                resumenEjecutivo += `APGAR ${apgarScore}/10 (excelente adaptaci√≥n). `;
            } else if (parseInt(apgarScore) >= 4) {
                resumenEjecutivo += `APGAR ${apgarScore}/10 (adaptaci√≥n moderada). `;
            } else {
                resumenEjecutivo += `APGAR ${apgarScore}/10 (requiere atenci√≥n inmediata). `;
            }
            
            if (parseInt(silvermanScore) === 0) {
                resumenEjecutivo += `Sin dificultad respiratoria.`;
            } else if (parseInt(silvermanScore) <= 3) {
                resumenEjecutivo += `Dificultad respiratoria leve.`;
            } else {
                resumenEjecutivo += `Dificultad respiratoria significativa - requiere monitoreo estrecho.`;
            }
            
            document.getElementById('resumenEjecutivo').textContent = resumenEjecutivo;
            
            // Generar alertas y recomendaciones
            let alertas = [];
            const alertasSignos = document.getElementById('alertasSignosVitales').textContent;
            const alertasLab = document.getElementById('alertasLaboratorio').textContent;
            const alertasVent = document.getElementById('alertasVentilatorias').textContent;
            const riesgoBili = document.getElementById('riesgoBilirrubina').textContent;
            const recomBili = document.getElementById('recomendacionBilirrubina').textContent;
            
            if (alertasSignos !== 'Sin alertas') {
                alertas.push(`üö® <strong>Signos Vitales:</strong> ${alertasSignos}`);
            }
            if (alertasLab !== 'Sin alertas') {
                alertas.push(`üß™ <strong>Laboratorios:</strong> ${alertasLab}`);
            }
            if (alertasVent !== 'Sin alertas') {
                alertas.push(`ü´Å <strong>Ventilaci√≥n:</strong> ${alertasVent}`);
            }
            if (riesgoBili.includes('FOTOTERAPIA') || riesgoBili.includes('EXANGUINO')) {
                alertas.push(`‚ö†Ô∏è <strong>Bilirrubina:</strong> ${riesgoBili} - ${recomBili}`);
            }
            
            if (alertas.length === 0) {
                alertas.push('‚úÖ <strong>Sin alertas cr√≠ticas</strong> - Continuar cuidados de rutina');
            }
            
            document.getElementById('alertasRecomendaciones').innerHTML = alertas.map(alerta => 
                `<div class="bg-white p-3 rounded border-l-4 border-yellow-500">${alerta}</div>`
            ).join('');
            
            // Generar resumen cl√≠nico detallado
            let summary = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <h4 class="font-bold text-green-700 mb-4">üìã Datos del Paciente</h4>
                        <div class="space-y-2 text-sm">
                            <div><strong>Expediente:</strong> ${data.expediente || 'No especificado'}</div>
                            <div><strong>Fecha de nacimiento:</strong> ${data.fechaNacimiento || 'No especificada'}</div>
                            <div><strong>Sexo:</strong> ${data.sexo || 'No especificado'}</div>
                            <div><strong>Edad gestacional:</strong> ${document.getElementById('clasificacionEG').textContent}</div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <h4 class="font-bold text-blue-700 mb-4">üìè Antropometr√≠a</h4>
                        <div class="space-y-2 text-sm">
                            <div><strong>Peso:</strong> ${data.peso || '-'} g</div>
                            <div><strong>Talla:</strong> ${data.talla || '-'} cm</div>
                            <div><strong>IMC:</strong> ${document.getElementById('imcCalculado').textContent} kg/m¬≤</div>
                            <div><strong>Clasificaci√≥n:</strong> ${document.getElementById('clasificacionPeso').textContent}</div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <h4 class="font-bold text-red-700 mb-4">üíì Signos Vitales</h4>
                        <div class="space-y-2 text-sm">
                            <div><strong>FC:</strong> ${data.frecuenciaCardiaca || '-'} lpm</div>
                            <div><strong>FR:</strong> ${data.frecuenciaRespiratoria || '-'} rpm</div>
                            <div><strong>Temperatura:</strong> ${data.temperatura || '-'} ¬∞C</div>
                            <div><strong>SatO2:</strong> ${data.saturacionO2 || '-'} %</div>
                            <div><strong>Alertas:</strong> ${document.getElementById('alertasSignosVitales').textContent}</div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <h4 class="font-bold text-yellow-700 mb-4">üß™ Laboratorios</h4>
                        <div class="space-y-2 text-sm">
                            <div><strong>Hemoglobina:</strong> ${data.hemoglobina || '-'} g/dL</div>
                            <div><strong>Bilirrubina:</strong> ${data.bilirrubina || '-'} mg/dL</div>
                            <div><strong>Riesgo:</strong> ${document.getElementById('riesgoBilirrubina').textContent}</div>
                            <div><strong>Recomendaci√≥n:</strong> ${document.getElementById('recomendacionBilirrubina').textContent}</div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <h4 class="font-bold text-purple-700 mb-4">üìä Escalas Cl√≠nicas</h4>
                        <div class="space-y-2 text-sm">
                            <div><strong>APGAR:</strong> ${document.getElementById('apgarTotal').textContent}/10 - ${document.getElementById('apgarInterpretacion').textContent}</div>
                            <div><strong>Silverman:</strong> ${document.getElementById('silvermanTotal').textContent}/10 - ${document.getElementById('silvermanInterpretacion').textContent}</div>
                            <div><strong>NIPS (Dolor):</strong> ${document.getElementById('nipsTotal').textContent}/7 - ${document.getElementById('nipsInterpretacion').textContent}</div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <h4 class="font-bold text-amber-700 mb-4">‚ö†Ô∏è Evaluaci√≥n de Riesgos</h4>
                        <div class="space-y-2 text-sm">
                            <div><strong>Riesgo de Ca√≠das:</strong> ${document.getElementById('caidaTotal').textContent} puntos - ${document.getElementById('caidaRiesgo').textContent}</div>
                            <div><strong>Riesgo de UPP:</strong> ${document.getElementById('bradenTotal').textContent} puntos - ${document.getElementById('bradenRiesgo').textContent}</div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <h4 class="font-bold text-slate-700 mb-4">ü´Å Soporte Ventilatorio</h4>
                        <div class="space-y-2 text-sm">
                            <div><strong>Modo:</strong> ${data.modoVentilatorio || 'No especificado'}</div>
                            <div><strong>FiO2:</strong> ${data.fio2 || '-'}% | <strong>PEEP:</strong> ${data.peep || '-'} cmH2O</div>
                            <div><strong>Relaci√≥n I:E:</strong> ${document.getElementById('relacionIE').textContent} | <strong>Vol. Minuto:</strong> ${document.getElementById('volumenMinuto').textContent} L/min</div>
                            <div><strong>Alertas:</strong> ${document.getElementById('alertasVentilatorias').textContent}</div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <h4 class="font-bold text-emerald-700 mb-4">ü©∫ Diagn√≥sticos de Enfermer√≠a</h4>
                        <div class="space-y-2 text-sm">
                            ${generarResumenDiagnosticos()}
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <h4 class="font-bold text-indigo-700 mb-4">‚è∞ Fecha del Reporte</h4>
                        <div class="space-y-2 text-sm">
                            <div><strong>Generado:</strong> ${new Date().toLocaleString('es-ES')}</div>
                            <div><strong>Sistema:</strong> NeoClinic v1.0</div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('clinicalSummary').innerHTML = summary;
            document.getElementById('resultsArea').classList.remove('hidden');
            
            // Scroll al √°rea de resultados
            document.getElementById('resultsArea').scrollIntoView({ behavior: 'smooth' });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9927b2b3063d649a',t:'MTc2MTEyMjUxMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
